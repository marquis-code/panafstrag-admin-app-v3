import{e as D,l as m,s as V,o as a,c as l,a as t,u as r,g as n,n as g,q as B,t as _,x as M,b as y,w as h,T as w,y as k,z}from"./D2ZHngAM.js";import{u as S}from"./CjkzigEY.js";const T={class:"space-y-4"},U=["src"],F={key:1,class:"relative z-10 flex flex-col items-center"},N={key:2,class:"relative z-10 flex flex-col items-center"},A={key:0,class:"text-xs font-bold text-red-500"},O=D({__name:"MediaUpload",props:{modelValue:{},folder:{}},emits:["update:modelValue"],setup(d,{emit:i}){const s=d,b=i,{fetchWithAuth:$}=S(),u=m(!1),p=m(""),f=m(!1),v=m(s.modelValue);V(()=>s.modelValue,o=>{v.value=o});const x=async o=>{u.value=!0,p.value="";const e=new FormData;e.append("file",o),s.folder&&e.append("folder",s.folder);try{const c=await $("/media/upload",{method:"POST",body:e});v.value=c.secure_url,b("update:modelValue",c.secure_url)}catch{p.value="Upload failed. Please try again."}finally{u.value=!1}},C=o=>{const e=o.target.files?.[0];e&&x(e)},j=o=>{f.value=!1;const e=o.dataTransfer?.files?.[0];e&&x(e)};return(o,e)=>(a(),l("div",T,[t("div",{class:B(["relative aspect-video w-full rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-800 flex flex-col items-center justify-center gap-3 bg-slate-50 dark:bg-slate-900/50 hover:border-indigo-600 transition-all group overflow-hidden",{"border-indigo-600 bg-indigo-50/10":r(f)}]),onDragover:e[0]||(e[0]=g(c=>f.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=g(c=>f.value=!1,["prevent"])),onDrop:g(j,["prevent"])},[r(v)?(a(),l("img",{key:0,src:r(v),class:"absolute inset-0 w-full h-full object-cover"},null,8,U)):n("",!0),r(u)?n("",!0):(a(),l("div",F,[e[2]||(e[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-slate-400 group-hover:text-indigo-600 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-7-3l-3-3m0 0l-3 3m3-3v12"})],-1)),e[3]||(e[3]=t("p",{class:"text-xs font-black text-slate-400 mt-2 uppercase tracking-widest"},"Click or drag to upload",-1)),t("input",{type:"file",onChange:C,class:"absolute inset-0 opacity-0 cursor-pointer",accept:"image/*"},null,32)])),r(u)?(a(),l("div",N,[...e[4]||(e[4]=[t("div",{class:"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"text-xs font-black text-indigo-600 mt-4 uppercase tracking-widest"},"Uploading...",-1)])])):n("",!0)],34),r(p)?(a(),l("div",A,_(r(p)),1)):n("",!0)]))}}),J=Object.assign(O,{__name:"MediaUpload"}),P={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"},q={key:0,class:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden"},E={class:"px-10 py-8 flex items-center justify-between border-b border-slate-50 dark:border-slate-800"},L={class:"text-2xl font-black tracking-tight"},W={class:"px-10 py-10 max-h-[70vh] overflow-y-auto"},G={key:0,class:"px-10 py-8 bg-slate-50 dark:bg-slate-800/50 flex justify-end gap-3"},K={__name:"Modal",props:{show:Boolean,title:String},emits:["close"],setup(d){return(i,s)=>(a(),M(z,{to:"body"},[y(w,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:h(()=>[d.show?(a(),l("div",P,[y(w,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 translate-y-4"},{default:h(()=>[d.show?(a(),l("div",q,[t("div",E,[t("h3",L,_(d.title),1),t("button",{onClick:s[0]||(s[0]=b=>i.$emit("close")),class:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors"},[...s[1]||(s[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",W,[k(i.$slots,"default")]),i.$slots.actions?(a(),l("div",G,[k(i.$slots,"actions")])):n("",!0)])):n("",!0)]),_:3})])):n("",!0)]),_:3})]))}};export{J as _,K as a};
