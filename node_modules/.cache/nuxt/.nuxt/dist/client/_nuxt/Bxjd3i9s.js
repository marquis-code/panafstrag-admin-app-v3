import{_ as H}from"./iZQW2eg-.js";import{_ as j,a as Y}from"./CErgheon.js";import{_ as B}from"./Bn3eorda.js";import{_ as G}from"./CmW_OHVS.js";import{o as W,r as n,d as z,k as X,u as Z,a as b,c as g,b as e,e as q,f as T,g as f,F as J,h as K,w as U,i as v,v as y,p as Q,t as h}from"./BwQilRvH.js";import{G as m,u as C}from"./BceSs3DB.js";import"./DmSjj8Yx.js";const _={getArchives:()=>m.get("/archive"),getArchive:a=>m.get(`/archive/${a}`),createArchive:a=>m.post("/archive",a),updateArchive:(a,o)=>m.patch(`/archive/${a}`,o),deleteArchive:a=>m.delete(`/archive/${a}`)},ee=()=>{const a=n(!1),o=n([]),c=n(null),i=async()=>{a.value=!0,c.value=null;try{const r=await _.getArchives();return[200,201].includes(r?.status)&&(o.value=r.data?.data??r.data??[]),r}catch(r){c.value=r?.message||"Failed to fetch archives"}finally{a.value=!1}};return W(i),{loading:a,archives:o,error:c,fetchArchives:i}},te=()=>{const a=n(!1),{showToast:o}=C();return{loading:a,createArchive:async i=>{a.value=!0;try{const r=await _.createArchive(i);return[200,201].includes(r?.status)&&o({title:"Success",message:"Archive created successfully",toastType:"success",duration:3e3}),r}catch(r){o({title:"Error",message:r?.message||"Failed to create archive",toastType:"error",duration:3e3})}finally{a.value=!1}}}},ae=()=>{const a=n(!1),{showToast:o}=C();return{loading:a,updateArchive:async(i,r)=>{a.value=!0;try{const u=await _.updateArchive(i,r);return[200,201].includes(u?.status)&&o({title:"Success",message:"Archive updated successfully",toastType:"success",duration:3e3}),u}catch(u){o({title:"Error",message:u?.message||"Failed to update archive",toastType:"error",duration:3e3})}finally{a.value=!1}}}},se=()=>{const a=n(!1),{showToast:o}=C();return{loading:a,deleteArchive:async i=>{a.value=!0;try{const r=await _.deleteArchive(i);return[200,201].includes(r?.status)&&o({title:"Success",message:"Archive deleted successfully",toastType:"success",duration:3e3}),r}catch(r){o({title:"Error",message:r?.message||"Failed to delete archive",toastType:"error",duration:3e3})}finally{a.value=!1}}}},re={class:"space-y-12"},le={key:0,class:"py-24 flex justify-center"},oe={key:1},ne={key:2,class:"bg-white border border-gray-100 shadow-sm overflow-hidden"},ie={class:"overflow-x-auto"},ce={class:"w-full text-left border-collapse min-w-[800px]"},de={class:"divide-y divide-gray-100"},ue={class:"px-8 py-6"},pe={class:"font-black text-black uppercase tracking-tight group-hover:text-black transition-colors"},be={class:"text-[9px] font-black text-gray-400 uppercase tracking-widest line-clamp-1 italic"},ge={class:"px-8 py-6"},ve={class:"px-3 py-1 border border-black text-black text-[9px] font-black uppercase tracking-widest group-hover:bg-black group-hover:text-white transition-colors"},xe={class:"px-8 py-6 font-black text-[10px] uppercase tracking-widest text-gray-400 group-hover:text-black transition-colors"},fe={class:"px-8 py-6 text-right"},ye={class:"flex items-center justify-end gap-3"},he=["onClick"],me=["onClick"],ke={class:"space-y-12 py-4"},we={class:"space-y-6"},Ae={class:"space-y-6"},_e={class:"grid grid-cols-3 gap-6"},Ee={class:"space-y-6"},Te={class:"space-y-6 pb-8"},Ce={class:"grid md:grid-cols-2 gap-10"},Ue=["disabled"],Le=z({__name:"archives",setup(a){const{fetchArchives:o,archives:c,loading:i}=ee(),{createArchive:r}=te(),{updateArchive:u}=ae(),{deleteArchive:R}=se(),p=n(!1),k=n(!1),w=n(null),E=n(!1),x=n(null),l=X({title:"",description:"",type:"speech",date:"",year:new Date().getFullYear(),month:"",fileUrl:"",thumbnailUrl:""}),A=n(!1),D=()=>{x.value=null,Object.assign(l,{title:"",description:"",type:"speech",date:"",year:new Date().getFullYear(),month:"",fileUrl:"",thumbnailUrl:""}),p.value=!0},S=d=>{x.value=d._id,Object.assign(l,{...d,date:d.date?new Date(d.date).toISOString().split("T")[0]:""}),p.value=!0},I=async()=>{A.value=!0;try{x.value?await u(x.value,l):await r(l),await o(),p.value=!1}finally{A.value=!1}},M=d=>{w.value=d,k.value=!0},N=async()=>{if(w.value){E.value=!0;try{await R(w.value),await o(),k.value=!1}finally{E.value=!1,w.value=null}}};return Z({title:"Archives Management | PANAFSTRAG"}),(d,t)=>{const V=H,L=j,F=B,O=G,P=Y;return b(),g("div",re,[e("div",{class:"flex flex-col md:flex-row md:items-end justify-between gap-6"},[t[10]||(t[10]=e("div",null,[e("p",{class:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-400 mb-2"},"Intellectual Property"),e("h1",{class:"text-4xl lg:text-6xl font-black tracking-tighter uppercase italic leading-none text-black"},[q(" Archives "),e("span",{class:"not-italic text-gray-400 leading-none"},"Management.")])],-1)),e("button",{onClick:D,class:"px-10 py-5 bg-black text-white font-black text-[10px] tracking-[0.3em] uppercase hover:bg-gray-800 active:scale-95 transition-all shadow-xl shadow-black/10"}," ADD RESOURCE ")]),T(i)?(b(),g("div",le,[f(V)])):T(c)?.length?(b(),g("div",ne,[e("div",ie,[e("table",ce,[t[13]||(t[13]=e("thead",null,[e("tr",{class:"bg-gray-50 border-b border-gray-100"},[e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Resource Narrative"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Classification"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Indexing Year"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400 text-right"},"Actions")])],-1)),e("tbody",de,[(b(!0),g(J,null,K(T(c),s=>(b(),g("tr",{key:s._id,class:"hover:bg-gray-50/50 transition-colors group"},[e("td",ue,[e("div",null,[e("p",pe,h(s.title),1),e("p",be,h(s.description),1)])]),e("td",ge,[e("span",ve,h(s.type),1)]),e("td",xe,h(s.year),1),e("td",fe,[e("div",ye,[e("button",{onClick:$=>S(s),class:"p-2 hover:bg-black hover:text-white border border-transparent hover:border-black transition-all"},[...t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,he),e("button",{onClick:$=>M(s._id),class:"p-2 text-gray-300 hover:text-black hover:bg-white transition-all"},[...t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,me)])])]))),128))])])])])):(b(),g("div",oe,[f(L,{title:"REPO EMPTY",message:"The library sector contains no indexed materials."})])),f(O,{show:p.value,title:x.value?"EDIT RESOURCE LOG":"NEW RESIDENTIAL ENTRY",onClose:t[8]||(t[8]=s=>p.value=!1)},{actions:U(()=>[e("button",{onClick:t[7]||(t[7]=s=>p.value=!1),class:"px-10 py-5 text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-black transition-colors"},"ABORT"),e("button",{onClick:I,disabled:A.value,class:"px-12 py-5 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-gray-800 disabled:opacity-30 transition-all"},h(A.value?"INDEXING...":"AUTHORIZE ARCHIVE"),9,Ue)]),default:U(()=>[e("div",ke,[e("section",we,[t[19]||(t[19]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Resource Identity",-1)),e("div",Ae,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Primary Title",-1)),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.title=s),type:"text",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm uppercase tracking-widest"},null,512),[[y,l.title]])]),e("div",_e,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Classification",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.type=s),class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none text-[10px] font-black tracking-widest uppercase"},[...t[15]||(t[15]=[e("option",{value:"speech"},"SPEECH",-1),e("option",{value:"report"},"ANNUAL REPORT",-1),e("option",{value:"media"},"MEDIA",-1),e("option",{value:"research"},"RESEARCH PAPER",-1)])],512),[[Q,l.type]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Fiscal Year",-1)),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.year=s),type:"number",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none font-bold text-sm uppercase tracking-widest"},null,512),[[y,l.year,void 0,{number:!0}]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Specific Date",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.date=s),type:"date",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none text-[10px] font-black tracking-widest uppercase"},null,512),[[y,l.date]])])])])]),e("section",Ee,[t[21]||(t[21]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Narrative Profile",-1)),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Executive Summary",-1)),v(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.description=s),rows:"3",class:"w-full p-4 bg-gray-50 border-none outline-none focus:ring-1 focus:ring-black transition-all font-medium text-sm leading-relaxed"},null,512),[[y,l.description]])])]),e("section",Te,[t[24]||(t[24]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"File Repository",-1)),e("div",Ce,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Master Document URL",-1)),v(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.fileUrl=s),type:"url",placeholder:"HTTPS://DOC-VAULT.NET/...",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm uppercase tracking-tighter"},null,512),[[y,l.fileUrl]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-4"},"Identification Thumbnail",-1)),f(F,{modelValue:l.thumbnailUrl,"onUpdate:modelValue":t[6]||(t[6]=s=>l.thumbnailUrl=s),folder:"archives"},null,8,["modelValue"])])])])])]),_:1},8,["show","title"]),f(P,{show:k.value,title:"DELETE ARCHIVE ITEM",message:"Are you sure you want to remove this resource from the library? This operation is permanent.",loading:E.value,onClose:t[9]||(t[9]=s=>k.value=!1),onConfirm:N},null,8,["show","loading"])])}}});export{Le as default};
