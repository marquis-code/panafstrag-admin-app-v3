import{a as T,_ as $}from"./CK8g22TK.js";import{e as L,f as N,m as j,c as m,a as e,F,r as B,u as l,b as _,w as C,l as f,o as h,t as u,h as d,v as b,i as H}from"./D2ZHngAM.js";import{u as O}from"./CjkzigEY.js";import{u as I}from"./BL_WCkA3.js";import{u as P}from"./JI6JSYyE.js";const Y=()=>{const{fetchWithAuth:r}=O();return{getArchives:async()=>r("/archive"),getArchive:async o=>r(`/archive/${o}`),createArchive:async o=>r("/archive",{method:"POST",body:o}),updateArchive:async(o,v)=>r(`/archive/${o}`,{method:"PATCH",body:v}),deleteArchive:async o=>r(`/archive/${o}`,{method:"DELETE"})}},G={class:"space-y-12"},z={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden"},W={class:"w-full text-left border-collapse"},q={class:"divide-y divide-slate-100 dark:divide-slate-800"},J={class:"px-8 py-6"},K={class:"font-black text-slate-900 dark:text-white"},Q={class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest line-clamp-1"},X={class:"px-8 py-6"},Z={class:"px-3 py-1 bg-slate-50 dark:bg-slate-800 rounded-full text-[10px] font-black uppercase tracking-widest text-slate-400"},ee={class:"px-8 py-6 font-bold text-sm"},te={class:"px-8 py-6 text-right"},se={class:"flex items-center justify-end gap-2"},le=["onClick"],ae=["onClick"],oe={class:"space-y-8"},ne={class:"space-y-6"},re={class:"grid grid-cols-3 gap-4"},ie={class:"grid grid-cols-2 gap-8"},de=["disabled"],ge=L({__name:"archives",async setup(r){let c,g;const{getArchives:k,createArchive:w,updateArchive:y,deleteArchive:o}=Y(),{data:v,refresh:A}=([c,g]=N(()=>I("admin-archives",()=>k())),c=await c,g(),c),i=f(!1),p=f(null),a=j({title:"",description:"",type:"speech",date:"",year:new Date().getFullYear(),month:"",fileUrl:"",thumbnailUrl:""}),x=f(!1),U=()=>{p.value=null,Object.assign(a,{title:"",description:"",type:"speech",date:"",year:new Date().getFullYear(),month:"",fileUrl:"",thumbnailUrl:""}),i.value=!0},V=n=>{p.value=n._id,Object.assign(a,{...n,date:n.date?new Date(n.date).toISOString().split("T")[0]:""}),i.value=!0},D=async()=>{x.value=!0;try{p.value?await y(p.value,a):await w(a),await A(),i.value=!1}finally{x.value=!1}},M=async n=>{confirm("Are you sure you want to delete this archive item?")&&(await o(n),await A())};return P({title:"Archives Management | PANAFSTRAG"}),(n,t)=>{const S=$,E=T;return h(),m("div",G,[e("div",{class:"flex items-center justify-between"},[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-4xl font-black mb-2 tracking-tight"},"Archives Management"),e("p",{class:"text-slate-500 font-bold"},"Manage speeches, reports, and research resources")],-1)),e("button",{onClick:U,class:"px-8 py-4 bg-indigo-600 text-white font-black rounded-2xl shadow-xl shadow-indigo-100 dark:shadow-none hover:-translate-y-1 active:scale-95 transition-all"}," ADD RESOURCE ")]),e("div",z,[e("table",W,[t[12]||(t[12]=e("thead",null,[e("tr",{class:"bg-slate-50 dark:bg-slate-800/50"},[e("th",{class:"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400"},"Resource"),e("th",{class:"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400"},"Type"),e("th",{class:"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400"},"Year"),e("th",{class:"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400 text-right"},"Actions")])],-1)),e("tbody",q,[(h(!0),m(F,null,B(l(v),s=>(h(),m("tr",{key:s._id,class:"hover:bg-slate-50/50 dark:hover:bg-slate-800/20 transition-colors"},[e("td",J,[e("div",null,[e("p",K,u(s.title),1),e("p",Q,u(s.description),1)])]),e("td",X,[e("span",Z,u(s.type),1)]),e("td",ee,u(s.year),1),e("td",te,[e("div",se,[e("button",{onClick:R=>V(s),class:"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg transition-all shadow-sm"},[...t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,le),e("button",{onClick:R=>M(s._id),class:"p-2 hover:bg-red-50 text-red-400 rounded-lg transition-all shadow-sm"},[...t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ae)])])]))),128))])])]),_(E,{show:l(i),title:l(p)?"Edit Resource":"New Resource",onClose:t[8]||(t[8]=s=>i.value=!1)},{actions:C(()=>[e("button",{onClick:t[7]||(t[7]=s=>i.value=!1),class:"px-8 py-4 text-slate-500 font-black text-xs uppercase tracking-widest"},"CANCEL"),e("button",{onClick:D,disabled:l(x),class:"px-8 py-4 bg-indigo-600 text-white font-black rounded-2xl shadow-lg shadow-indigo-100 dark:shadow-none hover:-translate-y-1 active:scale-95 transition-all disabled:opacity-50"},u(l(x)?"SAVING...":"SAVE CHANGES"),9,de)]),default:C(()=>[e("div",oe,[e("div",ne,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1"},"Title",-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l(a).title=s),type:"text",class:"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium"},null,512),[[b,l(a).title]])]),e("div",re,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1"},"Type",-1)),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(a).type=s),class:"w-full px-4 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl text-xs font-black tracking-widest uppercase"},[...t[14]||(t[14]=[e("option",{value:"speech"},"Speech",-1),e("option",{value:"report"},"Annual Report",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"research"},"Research Paper",-1)])],512),[[H,l(a).type]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1"},"Year",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l(a).year=s),type:"number",class:"w-full px-4 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl text-xs font-bold"},null,512),[[b,l(a).year,void 0,{number:!0}]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1"},"Date",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l(a).date=s),type:"date",class:"w-full px-4 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl text-xs font-bold"},null,512),[[b,l(a).date]])])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(a).description=s),rows:"3",class:"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium text-sm"},null,512),[[b,l(a).description]])]),e("div",ie,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1"},"Resource File (URL)",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l(a).fileUrl=s),type:"url",placeholder:"https://...",class:"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium text-sm"},null,512),[[b,l(a).fileUrl]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1"},"Thumbnail Image",-1)),_(S,{modelValue:l(a).thumbnailUrl,"onUpdate:modelValue":t[6]||(t[6]=s=>l(a).thumbnailUrl=s),folder:"archives"},null,8,["modelValue"])])])])]),_:1},8,["show","title"])])}}});export{ge as default};
