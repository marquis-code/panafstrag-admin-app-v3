import{r as c,d as _,w as h,b as u,c as d,e as s,g as f,f as m,A as g,n as D,t as U}from"./Df4s53kg.js";import{b as F,u as T}from"./BMy0hLc4.js";const C={uploadFile:o=>F.post("/media/upload",o)},V=()=>{const o=c(!1),n=c(null),r=c(null),{showToast:v}=T();return{loading:o,uploadedUrl:n,error:r,uploadFile:async(p,i)=>{o.value=!0,r.value=null;const t=new FormData;t.append("file",p),i&&t.append("folder",i);try{const a=await C.uploadFile(t);return[200,201].includes(a?.status)?(n.value=a.data?.secure_url??a.data,n.value):a}catch(a){r.value="Upload failed. Please try again.",v({title:"Error",message:a?.message||"Upload failed. Please try again.",toastType:"error",duration:3e3})}finally{o.value=!1}}}},A={class:"space-y-4"},M=["src"],j={key:1,class:"relative z-10 flex flex-col items-center p-8"},E={key:2,class:"relative z-10 flex flex-col items-center"},B={key:0,class:"text-[9px] font-black text-black uppercase tracking-widest"},N=_({__name:"MediaUpload",props:{modelValue:{},folder:{}},emits:["update:modelValue"],setup(o,{emit:n}){const r=o,v=n,{uploadFile:y,loading:p,error:i}=V(),t=c(!1),a=c(r.modelValue);h(()=>r.modelValue,l=>{a.value=l});const b=async l=>{const e=await y(l,r.folder);e&&(a.value=e,v("update:modelValue",e))},w=l=>{const e=l.target.files?.[0];e&&b(e)},x=l=>{t.value=!1;const e=l.dataTransfer?.files?.[0];e&&b(e)};return(l,e)=>(u(),d("div",A,[s("div",{class:D(["relative aspect-video w-full border border-gray-100 flex flex-col items-center justify-center gap-4 bg-gray-50/50 hover:bg-gray-50 transition-all group overflow-hidden",{"bg-gray-100":t.value}]),onDragover:e[0]||(e[0]=g(k=>t.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=g(k=>t.value=!1,["prevent"])),onDrop:g(x,["prevent"])},[a.value?(u(),d("img",{key:0,src:a.value,class:"absolute inset-0 w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700"},null,8,M)):f("",!0),m(p)?f("",!0):(u(),d("div",j,[e[2]||(e[2]=s("div",{class:"w-12 h-12 bg-white shadow-xl shadow-black/5 flex items-center justify-center rounded-sm mb-4 transform group-hover:-translate-y-1 transition-transform"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-7-3l-3-3m0 0l-3 3m3-3v12"})])],-1)),e[3]||(e[3]=s("p",{class:"text-[9px] font-black text-gray-400 uppercase tracking-[0.3em]"},"Drop Media or Click",-1)),s("input",{type:"file",onChange:w,class:"absolute inset-0 opacity-0 cursor-pointer",accept:"image/*"},null,32)])),m(p)?(u(),d("div",E,[...e[4]||(e[4]=[s("div",{class:"w-8 h-8 border-2 border-black border-t-transparent rounded-full animate-spin"},null,-1),s("p",{class:"text-[8px] font-black text-black mt-4 uppercase tracking-[0.4em]"},"Uploading",-1)])])):f("",!0)],34),m(i)?(u(),d("div",B,U(m(i)),1)):f("",!0)]))}}),P=Object.assign(N,{__name:"MediaUpload"});export{P as _};
