import{_ as O}from"./C9iCbSzd.js";import{_ as H,a as j}from"./Cbt17wsT.js";import{_ as P}from"./BRg3fQDk.js";import{o as U,r as o,d as V,a as Y,b as p,c as y,e,i as G,f as _,x as h,F as W,h as Z,y as I,j as z,v as q,t as A,z as J}from"./Df4s53kg.js";import{a as f,u as T}from"./BMy0hLc4.js";import"./BsOttllv.js";import"./CHTJDVlQ.js";const w={create(t){return f.post("/responsibility",t)},getAll(){return f.get("/responsibility")},getById(t){return f.get(`/responsibility/${t}`)},update(t,i){return f.patch(`/responsibility/${t}`,i)},delete(t){return f.delete(`/responsibility/${t}`)}},K=()=>{const t=o(!1),i=o([]),l=o(null),n=async()=>{t.value=!0,l.value=null;try{const s=await w.getAll();return[200,201].includes(s?.status)&&(i.value=s.data?.data??s.data??[]),s}catch(s){l.value=s?.message||"Failed to fetch responsibilities"}finally{t.value=!1}};return U(n),{fetchResponsibilities:n,responsibilities:i,loading:t,error:l}},Q=()=>{const t=o(!1),{showToast:i}=T();return{createResponsibility:async n=>{t.value=!0;try{const s=await w.create(n);return[200,201].includes(s?.status)&&i({title:"Success",message:"Responsibility created successfully",toastType:"success",duration:3e3}),s}catch(s){i({title:"Error",message:s?.message||"Failed to create responsibility",toastType:"error",duration:3e3})}finally{t.value=!1}},loading:t}},X=()=>{const t=o(!1),{showToast:i}=T();return{updateResponsibility:async(n,s)=>{t.value=!0;try{const c=await w.update(n,s);return[200,201].includes(c?.status)&&i({title:"Success",message:"Responsibility updated successfully",toastType:"success",duration:3e3}),c}catch(c){i({title:"Error",message:c?.message||"Failed to update responsibility",toastType:"error",duration:3e3})}finally{t.value=!1}},loading:t}},ee=()=>{const t=o(!1),{showToast:i}=T();return{deleteResponsibility:async n=>{t.value=!0;try{const s=await w.delete(n);return[200,201].includes(s?.status)&&i({title:"Success",message:"Responsibility deleted successfully",toastType:"success",duration:3e3}),s}catch(s){i({title:"Error",message:s?.message||"Failed to delete responsibility",toastType:"error",duration:3e3})}finally{t.value=!1}},loading:t}},te={class:"space-y-12"},se={key:0,class:"py-24 flex justify-center"},ae={key:1},ie={key:2,class:"bg-white border border-gray-100 shadow-sm overflow-hidden"},oe={class:"overflow-x-auto"},ne={class:"w-full text-left border-collapse min-w-[600px]"},le={class:"divide-y divide-gray-100"},re={class:"px-8 py-6"},ce={class:"text-sm font-medium text-black leading-relaxed group-hover:text-black transition-colors"},de={class:"px-8 py-6 text-right"},ue={class:"flex items-center justify-end gap-3"},pe=["onClick"],ye=["onClick"],be={class:"space-y-8 py-4"},ge={class:"space-y-6"},fe=["disabled"],Te=V({__name:"responsibilities",setup(t){const{fetchResponsibilities:i,responsibilities:l,loading:n}=K(),{createResponsibility:s}=Q(),{updateResponsibility:c}=X(),{deleteResponsibility:R}=ee(),d=o(!1),v=o(!1),m=o(null),k=o(!1),b=o(null),u=J({description:""}),x=o(!1),E=()=>{b.value=null,u.description="",d.value=!0},C=g=>{b.value=g._id,u.description=g.description,d.value=!0},N=async()=>{x.value=!0;try{b.value?await c(b.value,u):await s(u),await i(),d.value=!1}finally{x.value=!1}},D=g=>{m.value=g,v.value=!0},M=async()=>{if(m.value){k.value=!0;try{await R(m.value),await i(),v.value=!1}finally{k.value=!1,m.value=null}}};return Y({title:"Responsibilities | PANAFSTRAG"}),(g,a)=>{const S=O,L=H,B=P,F=j;return p(),y("div",te,[e("div",{class:"flex flex-col md:flex-row md:items-end justify-between gap-6"},[a[4]||(a[4]=e("div",null,[e("p",{class:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-400 mb-2"},"Institutional Mandate"),e("h1",{class:"text-4xl lg:text-6xl font-black tracking-tighter uppercase italic leading-none text-black"},[G(" Responsibilities "),e("span",{class:"not-italic text-gray-400 leading-none"},"Management.")])],-1)),e("button",{onClick:E,class:"px-10 py-5 bg-black text-white font-black text-[10px] tracking-[0.3em] uppercase hover:bg-gray-800 active:scale-95 transition-all shadow-xl shadow-black/10"}," ADD RESPONSIBILITY ")]),_(n)?(p(),y("div",se,[h(S)])):_(l)?.length?(p(),y("div",ie,[e("div",oe,[e("table",ne,[a[7]||(a[7]=e("thead",null,[e("tr",{class:"bg-gray-50 border-b border-gray-100"},[e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Mandate Description"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400 text-right"},"Actions")])],-1)),e("tbody",le,[(p(!0),y(W,null,Z(_(l),r=>(p(),y("tr",{key:r._id,class:"hover:bg-gray-50/50 transition-colors group"},[e("td",re,[e("p",ce,A(r.description),1)]),e("td",de,[e("div",ue,[e("button",{onClick:$=>C(r),class:"p-2 hover:bg-black hover:text-white border border-transparent hover:border-black transition-all"},[...a[5]||(a[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,pe),e("button",{onClick:$=>D(r._id),class:"p-2 text-gray-300 hover:text-black hover:bg-white transition-all"},[...a[6]||(a[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ye)])])]))),128))])])])])):(p(),y("div",ae,[h(L,{title:"NO DATA",message:"The institutional mandate sector is currently unpopulated."})])),h(B,{show:d.value,title:b.value?"EDIT MANDATE CLAUSE":"NEW MANDATE INITIALIZATION",onClose:a[2]||(a[2]=r=>d.value=!1)},{actions:I(()=>[e("button",{onClick:a[1]||(a[1]=r=>d.value=!1),class:"px-10 py-5 text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-black transition-colors"},"ABORT"),e("button",{onClick:N,disabled:x.value,class:"px-12 py-5 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-gray-800 disabled:opacity-30 transition-all"},A(x.value?"INITIALIZING...":"AUTHORIZE MANDATE"),9,fe)]),default:I(()=>[e("div",be,[e("section",ge,[a[9]||(a[9]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Mandate Parameters",-1)),e("div",null,[a[8]||(a[8]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Detailed Clause Description",-1)),z(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=r=>u.description=r),rows:"5",class:"w-full p-4 bg-gray-50 border-none outline-none focus:ring-1 focus:ring-black transition-all font-medium text-sm leading-relaxed",placeholder:"DEFINE THE INSTITUTIONAL RESPONSIBILITY..."},null,512),[[q,u.description]])])])])]),_:1},8,["show","title"]),h(F,{show:v.value,title:"DELETE RESPONSIBILITY",message:"Are you sure you want to remove this institutional responsibility? This operation is permanent.",loading:k.value,onClose:a[3]||(a[3]=r=>v.value=!1),onConfirm:M},null,8,["show","loading"])])}}});export{Te as default};
