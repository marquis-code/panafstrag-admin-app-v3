import{_ as I}from"./BMOzIwRb.js";import{_ as T,a as V}from"./D1lf53C7.js";import{_ as R}from"./CIZAdd7N.js";import{G as _}from"./DlETJnZp.js";import{r as g,d as B,o as U,a as F,b as c,c as d,e as t,i as G,f as s,x as f,F as O,h as z,y as w,t as n,g as E,n as S}from"./CEj_7URL.js";import"./CkW0jUnt.js";import"./DB5CxoXR.js";const k={getAll(){return _.get("/enquiries")},updateStatus(p,l){return _.patch(`/enquiries/${p}/status`,l)},delete(p){return _.delete(`/enquiries/${p}`)}},P=()=>{const p=g([]),l=g(!1),b=async()=>{l.value=!0;try{const o=await k.getAll();p.value=o.data}catch(o){console.error(o)}finally{l.value=!1}};return{enquiries:p,loading:l,fetchEnquiries:b,updateEnquiryStatus:async(o,r)=>{try{await k.updateStatus(o,{status:r}),await b()}catch(x){console.error(x)}},deleteEnquiry:async o=>{try{await k.delete(o),await b()}catch(r){console.error(r)}}}},Q={class:"space-y-12"},Y={key:0,class:"py-24 flex justify-center"},H={key:1},K={key:2,class:"bg-white border border-gray-100 shadow-sm overflow-hidden"},W={class:"overflow-x-auto"},J={class:"w-full text-left border-collapse min-w-[800px]"},X={class:"divide-y divide-gray-100"},Z={class:"px-8 py-6"},tt={class:"text-[10px] font-bold text-gray-400 tabular-nums"},et={class:"px-8 py-6"},st={class:"space-y-1"},at={class:"text-sm font-black uppercase tracking-tighter"},nt={class:"text-[10px] text-gray-400 font-medium"},ot={class:"px-8 py-6"},rt={class:"px-3 py-1 bg-gray-100 text-[9px] font-black uppercase tracking-widest rounded-full"},lt={class:"px-8 py-6"},it={class:"flex items-center gap-2"},ct={class:"px-8 py-6 text-right"},dt={class:"flex items-center justify-end gap-3"},pt=["onClick"],ut=["onClick"],gt={key:0,class:"space-y-8 py-4"},xt={class:"grid grid-cols-2 gap-8 border-b border-gray-100 pb-8"},yt={class:"text-sm font-black uppercase tracking-tighter"},bt={class:"text-sm font-medium"},mt={class:"space-y-4"},ft={class:"text-xs font-black uppercase tracking-[0.2em] italic"},_t={class:"p-6 bg-gray-50 rounded-xl"},kt={class:"text-sm font-medium leading-relaxed text-gray-700 whitespace-pre-wrap"},ht=["disabled"],Nt=B({__name:"enquiries",setup(p){const{enquiries:l,loading:b,fetchEnquiries:h,updateEnquiryStatus:v,deleteEnquiry:o}=P(),r=g(!1),x=g(!1),i=g(null),m=g(null),u=g(!1);U(()=>{h()});const q=y=>{i.value=y,r.value=!0},C=async(y,e)=>{u.value=!0;try{await v(y,e),r.value=!1}finally{u.value=!1}},A=y=>{m.value=y,x.value=!0},N=async()=>{if(m.value){u.value=!0;try{await o(m.value),x.value=!1}finally{u.value=!1,m.value=null}}};return F({title:"Enquiries | PANAFSTRAG"}),(y,e)=>{const M=I,D=T,j=R,L=V;return c(),d("div",Q,[e[11]||(e[11]=t("div",{class:"flex flex-col md:flex-row md:items-end justify-between gap-6"},[t("div",null,[t("p",{class:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-400 mb-2"},"Communications"),t("h1",{class:"text-4xl lg:text-6xl font-black tracking-tighter uppercase italic leading-none text-black"},[G(" Enquiries "),t("span",{class:"not-italic text-gray-400 leading-none"},"& Support.")])])],-1)),s(b)?(c(),d("div",Y,[f(M)])):s(l)?.length?(c(),d("div",K,[t("div",W,[t("table",J,[e[6]||(e[6]=t("thead",null,[t("tr",{class:"bg-gray-50 border-b border-gray-100"},[t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Date"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Sender"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Subject"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Status"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400 text-right"},"Actions")])],-1)),t("tbody",X,[(c(!0),d(O,null,z(s(l),a=>(c(),d("tr",{key:a._id,class:"hover:bg-gray-50/50 transition-colors group"},[t("td",Z,[t("p",tt,n(new Date(a.createdAt).toLocaleDateString()),1)]),t("td",et,[t("div",st,[t("p",at,n(a.name),1),t("p",nt,n(a.email),1)])]),t("td",ot,[t("span",rt,n(a.subject),1)]),t("td",lt,[t("div",it,[t("div",{class:S(["w-1.5 h-1.5 rounded-full",a.status==="pending"?"bg-amber-500":"bg-green-500"])},null,2),t("span",{class:S(["text-[10px] font-black uppercase tracking-widest italic",a.status==="pending"?"text-amber-600":"text-green-600"])},n(a.status),3)])]),t("td",ct,[t("div",dt,[t("button",{onClick:$=>q(a),class:"p-2 hover:bg-black hover:text-white border border-transparent hover:border-black transition-all"},[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,pt),t("button",{onClick:$=>A(a._id),class:"p-2 text-gray-300 hover:text-black hover:bg-white transition-all"},[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ut)])])]))),128))])])])])):(c(),d("div",H,[f(D,{title:"NO ENQUIRIES",message:"There are currently no incoming messages from the contact portal."})])),f(j,{show:s(r),title:"ENQUIRY DETAILS",onClose:e[2]||(e[2]=a=>r.value=!1)},{actions:w(()=>[t("button",{onClick:e[0]||(e[0]=a=>r.value=!1),class:"px-10 py-5 text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-black transition-colors"},"CLOSE"),s(i)?.status==="pending"?(c(),d("button",{key:0,onClick:e[1]||(e[1]=a=>C(s(i)._id,"resolved")),disabled:s(u),class:"px-12 py-5 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-gray-800 disabled:opacity-30 transition-all"},n(s(u)?"UPDATING...":"MARK AS RESOLVED"),9,ht)):E("",!0)]),default:w(()=>[s(i)?(c(),d("div",gt,[t("section",xt,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Sender Name",-1)),t("p",yt,n(s(i).name),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Email Address",-1)),t("p",bt,n(s(i).email),1)])]),t("section",mt,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Subject Matter",-1)),t("p",ft,n(s(i).subject),1)]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Internal Message",-1)),t("div",_t,[t("p",kt,n(s(i).message),1)])])])])):E("",!0)]),_:1},8,["show"]),f(L,{show:s(x),title:"DELETE ENQUIRY",message:"Are you sure you want to remove this enquiry? This action cannot be undone.",loading:s(u),onClose:e[3]||(e[3]=a=>x.value=!1),onConfirm:N},null,8,["show","loading"])])}}});export{Nt as default};
