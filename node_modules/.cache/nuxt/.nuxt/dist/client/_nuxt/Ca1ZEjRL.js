import{_ as L}from"./B9IReJDs.js";import{_ as V,a as G}from"./DwcYks7o.js";import{_ as H}from"./CHhF4iQB.js";import{e as R,r as l,f as U,u as J,o as p,c as v,a as e,d as P,g as _,b as h,F as W,h as z,w as T,i as Y,v as Z,t as O,k as q}from"./BNeZIUNh.js";import{a as f,u as j}from"./B6vGYgdm.js";import"./DfxwkhoI.js";const w={create(t){return f.post("/objective",t)},getAll(){return f.get("/objective")},getById(t){return f.get(`/objective/${t}`)},update(t,o){return f.patch(`/objective/${t}`,o)},delete(t){return f.delete(`/objective/${t}`)}},K=()=>{const t=l(!1),o=l([]),r=l(null),n=async()=>{t.value=!0,r.value=null;try{const s=await w.getAll();return[200,201].includes(s?.status)&&(o.value=s.data?.data??s.data??[]),s}catch(s){r.value=s?.message||"Failed to fetch objectives"}finally{t.value=!1}};return R(n),{fetchObjectives:n,objectives:o,loading:t,error:r}},Q=()=>{const t=l(!1),{showToast:o}=j();return{createObjective:async n=>{t.value=!0;try{const s=await w.create(n);return[200,201].includes(s?.status)&&o({title:"Success",message:"Objective created successfully",toastType:"success",duration:3e3}),s}catch(s){o({title:"Error",message:s?.message||"Failed to create objective",toastType:"error",duration:3e3})}finally{t.value=!1}},loading:t}},X=()=>{const t=l(!1),{showToast:o}=j();return{updateObjective:async(n,s)=>{t.value=!0;try{const c=await w.update(n,s);return[200,201].includes(c?.status)&&o({title:"Success",message:"Objective updated successfully",toastType:"success",duration:3e3}),c}catch(c){o({title:"Error",message:c?.message||"Failed to update objective",toastType:"error",duration:3e3})}finally{t.value=!1}},loading:t}},ee=()=>{const t=l(!1),{showToast:o}=j();return{deleteObjective:async n=>{t.value=!0;try{const s=await w.delete(n);return[200,201].includes(s?.status)&&o({title:"Success",message:"Objective deleted successfully",toastType:"success",duration:3e3}),s}catch(s){o({title:"Error",message:s?.message||"Failed to delete objective",toastType:"error",duration:3e3})}finally{t.value=!1}},loading:t}},te={class:"space-y-12"},se={key:0,class:"py-24 flex justify-center"},ae={key:1},oe={key:2,class:"bg-white border border-gray-100 shadow-sm overflow-hidden"},le={class:"overflow-x-auto"},ne={class:"w-full text-left border-collapse min-w-[600px]"},re={class:"divide-y divide-gray-100"},ie={class:"px-8 py-6"},ce={class:"text-sm font-medium text-black leading-relaxed group-hover:text-black transition-colors"},de={class:"px-8 py-6 text-right"},ue={class:"flex items-center justify-end gap-3"},pe=["onClick"],ve=["onClick"],ge={class:"space-y-8 py-4"},be={class:"space-y-6"},fe=["disabled"],_e=U({__name:"objectives",setup(t){const{fetchObjectives:o,objectives:r,loading:n}=K(),{createObjective:s}=Q(),{updateObjective:c}=X(),{deleteObjective:C}=ee(),d=l(!1),m=l(!1),y=l(null),k=l(!1),g=l(null),u=q({description:""}),x=l(!1),E=()=>{g.value=null,u.description="",d.value=!0},A=b=>{g.value=b._id,u.description=b.description,d.value=!0},I=async()=>{x.value=!0;try{g.value?await c(g.value,u):await s(u),await o(),d.value=!1}finally{x.value=!1}},D=b=>{y.value=b,m.value=!0},M=async()=>{if(y.value){k.value=!0;try{await C(y.value),await o(),m.value=!1}finally{k.value=!1,y.value=null}}};return J({title:"Objectives | PANAFSTRAG"}),(b,a)=>{const S=L,N=V,F=H,B=G;return p(),v("div",te,[e("div",{class:"flex flex-col md:flex-row md:items-end justify-between gap-6"},[a[4]||(a[4]=e("div",null,[e("p",{class:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-400 mb-2"},"Strategic Direction"),e("h1",{class:"text-4xl lg:text-6xl font-black tracking-tighter uppercase italic leading-none text-black"},[P(" Objectives "),e("span",{class:"not-italic text-gray-400 leading-none"},"Management.")])],-1)),e("button",{onClick:E,class:"px-10 py-5 bg-black text-white font-black text-[10px] tracking-[0.3em] uppercase hover:bg-gray-800 active:scale-95 transition-all shadow-xl shadow-black/10"}," ADD OBJECTIVE ")]),_(n)?(p(),v("div",se,[h(S)])):_(r)?.length?(p(),v("div",oe,[e("div",le,[e("table",ne,[a[7]||(a[7]=e("thead",null,[e("tr",{class:"bg-gray-50 border-b border-gray-100"},[e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Mission Description"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400 text-right"},"Actions")])],-1)),e("tbody",re,[(p(!0),v(W,null,z(_(r),i=>(p(),v("tr",{key:i._id,class:"hover:bg-gray-50/50 transition-colors group"},[e("td",ie,[e("p",ce,O(i.description),1)]),e("td",de,[e("div",ue,[e("button",{onClick:$=>A(i),class:"p-2 hover:bg-black hover:text-white border border-transparent hover:border-black transition-all"},[...a[5]||(a[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,pe),e("button",{onClick:$=>D(i._id),class:"p-2 text-gray-300 hover:text-black hover:bg-white transition-all"},[...a[6]||(a[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ve)])])]))),128))])])])])):(p(),v("div",ae,[h(N,{title:"NO DATA",message:"The strategic mission sector is currently unpopulated."})])),h(F,{show:d.value,title:g.value?"EDIT MISSION OBJECTIVE":"NEW STRATEGIC TARGET",onClose:a[2]||(a[2]=i=>d.value=!1)},{actions:T(()=>[e("button",{onClick:a[1]||(a[1]=i=>d.value=!1),class:"px-10 py-5 text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-black transition-colors"},"ABORT"),e("button",{onClick:I,disabled:x.value,class:"px-12 py-5 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-gray-800 disabled:opacity-30 transition-all"},O(x.value?"AUTHORIZING...":"CONFIRM MISSION"),9,fe)]),default:T(()=>[e("div",ge,[e("section",be,[a[9]||(a[9]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Target Parameters",-1)),e("div",null,[a[8]||(a[8]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Detailed Mission Description",-1)),Y(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=i=>u.description=i),rows:"5",class:"w-full p-4 bg-gray-50 border-none outline-none focus:ring-1 focus:ring-black transition-all font-medium text-sm leading-relaxed",placeholder:"DEFINE THE STRATEGIC GOAL..."},null,512),[[Z,u.description]])])])])]),_:1},8,["show","title"]),h(B,{show:m.value,title:"DELETE OBJECTIVE",message:"Are you sure you want to remove this strategic objective? This operation is permanent.",loading:k.value,onClose:a[3]||(a[3]=i=>m.value=!1),onConfirm:M},null,8,["show","loading"])])}}});export{_e as default};
