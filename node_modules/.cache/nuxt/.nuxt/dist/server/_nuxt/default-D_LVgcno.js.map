{"version":3,"file":"default-D_LVgcno.js","sources":["../../../../../../../app/composables/useChat.ts","../../../../../../../app/components/ChatWidget.vue","../../../../../../../app/layouts/default.vue"],"sourcesContent":["import { io, Socket } from 'socket.io-client';\n\nexport const useChat = () => {\n  const config = useRuntimeConfig();\n  const { user } = useAuth();\n  const socket = ref<Socket | null>(null);\n  const messages = ref<any[]>([]);\n  const isConnected = ref(false);\n\n  const connect = () => {\n    if (socket.value) return;\n\n    socket.value = io(`${config.public.apiBase}/chat`, {\n      transports: ['websocket'],\n    });\n\n    socket.value.on('connect', () => {\n      isConnected.value = true;\n      socket.value?.emit('findAllMessages', {}, (data: any[]) => {\n        messages.value = data;\n      });\n    });\n\n    socket.value.on('disconnect', () => {\n      isConnected.value = false;\n    });\n\n    socket.value.on('newMessage', (message: any) => {\n      messages.value.push(message);\n    });\n  };\n\n  const sendMessage = (content: string) => {\n    if (!socket.value || !user.value) return;\n    socket.value.emit('sendMessage', {\n      sender: user.value._id,\n      content,\n    });\n  };\n\n  const disconnect = () => {\n    if (socket.value) {\n      socket.value.disconnect();\n      socket.value = null;\n    }\n  };\n\n  return {\n    messages,\n    isConnected,\n    connect,\n    sendMessage,\n    disconnect,\n  };\n};\n","<template>\n  <div class=\"fixed bottom-8 right-8 z-[100] flex flex-col items-end\">\n    <!-- Chat Window -->\n    <Transition\n      enter-active-class=\"transition duration-300 ease-out\"\n      enter-from-class=\"opacity-0 translate-y-8 scale-95\"\n      enter-to-class=\"opacity-100 translate-y-0 scale-100\"\n      leave-active-class=\"transition duration-200 ease-in\"\n      leave-from-class=\"opacity-100 translate-y-0 scale-100\"\n      leave-to-class=\"opacity-0 translate-y-8 scale-95\"\n    >\n      <div v-if=\"isOpen\" class=\"w-[24rem] h-[32rem] bg-white dark:bg-slate-900 rounded-[2.5rem] shadow-2xl border border-slate-100 dark:border-slate-800 flex flex-col overflow-hidden mb-6\">\n        <!-- Header -->\n        <div class=\"px-8 py-6 bg-indigo-600 text-white flex items-center justify-between\">\n          <div class=\"flex items-center gap-3\">\n            <div class=\"w-2 h-2 rounded-full bg-green-400 animate-pulse\"></div>\n            <h3 class=\"font-black text-lg\">Community Chat</h3>\n          </div>\n          <button @click=\"isOpen = false\" class=\"p-1 hover:bg-white/20 rounded-lg transition-colors\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </button>\n        </div>\n\n        <!-- Messages -->\n        <div ref=\"messageContainer\" class=\"flex-1 overflow-y-auto p-6 space-y-4 bg-slate-50 dark:bg-slate-950/50\">\n          <div v-for=\"msg in messages\" :key=\"msg._id\" :class=\"['flex flex-col', msg.sender._id === user?._id ? 'items-end' : 'items-start']\">\n            <div :class=\"['max-w-[80%] px-4 py-3 rounded-2xl text-sm font-medium shadow-sm', msg.sender._id === user?._id ? 'bg-indigo-600 text-white rounded-tr-none' : 'bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 rounded-tl-none']\">\n              {{ msg.content }}\n            </div>\n            <span class=\"text-[10px] font-bold text-slate-400 mt-1 uppercase tracking-tighter\">{{ msg.sender.name }}</span>\n          </div>\n        </div>\n\n        <!-- Input -->\n        <div class=\"p-4 bg-white dark:bg-slate-900 border-t border-slate-50 dark:border-slate-800\">\n          <div class=\"flex gap-2\">\n            <input \n              v-model=\"newMessage\" \n              @keyup.enter=\"handleSend\"\n              placeholder=\"Type your message...\" \n              class=\"flex-1 px-4 py-3 bg-slate-50 dark:bg-slate-800 border-none rounded-xl text-sm focus:ring-2 focus:ring-indigo-600 outline-none transition-all\"\n            />\n            <button @click=\"handleSend\" class=\"p-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all active:scale-95 shadow-lg shadow-indigo-100 dark:shadow-none\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </Transition>\n\n    <!-- Trigger Button -->\n    <button \n      @click=\"toggleChat\"\n      class=\"w-16 h-16 bg-indigo-600 text-white rounded-2xl shadow-2xl flex items-center justify-center hover:-translate-y-2 active:scale-90 transition-all group overflow-hidden relative\"\n    >\n      <div class=\"absolute inset-0 bg-white/10 group-hover:scale-150 transition-transform duration-700 rounded-full blur-xl\"></div>\n      <svg v-if=\"!isOpen\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-8 w-8 relative z-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\n      </svg>\n      <svg v-else xmlns=\"http://www.w3.org/2000/svg\" class=\"h-8 w-8 relative z-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n      </svg>\n    </button>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst { messages, connect, sendMessage, isConnected } = useChat()\nconst { user, isLoggedIn } = useAuth()\nconst isOpen = ref(false)\nconst newMessage = ref('')\nconst messageContainer = ref<HTMLElement | null>(null)\n\nconst toggleChat = () => {\n  if (!isLoggedIn.value) {\n    navigateTo('/login')\n    return\n  }\n  isOpen.value = !isOpen.value\n  if (isOpen.value && !isConnected.value) {\n    connect()\n  }\n}\n\nconst handleSend = () => {\n  if (newMessage.value.trim()) {\n    sendMessage(newMessage.value)\n    newMessage.value = ''\n    scrollToBottom()\n  }\n}\n\nconst scrollToBottom = () => {\n  nextTick(() => {\n    if (messageContainer.value) {\n      messageContainer.value.scrollTop = messageContainer.value.scrollHeight\n    }\n  })\n}\n\nwatch(messages, () => {\n  scrollToBottom()\n}, { deep: true })\n</script>\n","<template>\n  <div class=\"min-h-screen bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 font-sans\">\n    <!-- Header -->\n    <header class=\"sticky top-0 z-50 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-800\">\n      <nav class=\"container mx-auto px-4 h-20 flex items-center justify-between\">\n        <NuxtLink to=\"/\" class=\"hover:opacity-90 transition-opacity\">\n          <Logo />\n        </NuxtLink>\n\n        <!-- Desktop Navigation -->\n        <div class=\"hidden lg:flex items-center gap-8\">\n          <NuxtLink v-for=\"item in navItems\" :key=\"item.path\" :to=\"item.path\" \n            class=\"text-sm font-semibold hover:text-indigo-600 transition-colors\"\n            active-class=\"text-indigo-600\">\n            {{ item.label }}\n          </NuxtLink>\n        </div>\n\n        <div class=\"flex items-center gap-4\">\n          <button @click=\"isMobileMenuOpen = !isMobileMenuOpen\" class=\"lg:hidden p-2 text-slate-600 dark:text-slate-400\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6h16M4 12h16M4 18h16\" />\n            </svg>\n          </button>\n        </div>\n      </nav>\n\n      <!-- Mobile Menu -->\n      <Transition\n        enter-active-class=\"transition duration-200 ease-out\"\n        enter-from-class=\"opacity-0 -translate-y-4\"\n        enter-to-class=\"opacity-100 translate-y-0\"\n        leave-active-class=\"transition duration-150 ease-in\"\n        leave-from-class=\"opacity-100 translate-y-0\"\n        leave-to-class=\"opacity-0 -translate-y-4\"\n      >\n        <div v-if=\"isMobileMenuOpen\" class=\"lg:hidden bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-4 py-6 shadow-xl\">\n          <div class=\"flex flex-col gap-4\">\n            <NuxtLink v-for=\"item in navItems\" :key=\"item.path\" :to=\"item.path\" \n              class=\"text-lg font-bold hover:text-indigo-600 transition-colors\"\n              @click=\"isMobileMenuOpen = false\">\n              {{ item.label }}\n            </NuxtLink>\n          </div>\n        </div>\n      </Transition>\n    </header>\n\n    <!-- Main Content -->\n    <main class=\"container mx-auto px-4 py-12\">\n      <slot />\n    </main>\n\n    <!-- Footer -->\n    <footer class=\"bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 py-12\">\n      <div class=\"container mx-auto px-4\">\n        <div class=\"flex flex-col md:flex-row justify-between items-center gap-8\">\n          <Logo />\n          <p class=\"text-slate-500 dark:text-slate-400 text-sm\">\n            Â© {{ new Date().getFullYear() }} PANAFSTRAG. All rights reserved.\n          </p>\n          <div class=\"flex gap-6\">\n            <a href=\"#\" class=\"text-slate-400 hover:text-indigo-600 transition-colors\">Twitter</a>\n            <a href=\"#\" class=\"text-slate-400 hover:text-indigo-600 transition-colors\">LinkedIn</a>\n          </div>\n        </div>\n      </div>\n    </footer>\n    <!-- Chat Widget -->\n    <ChatWidget />\n  </div>\n</template>\n\n<script setup>\nconst isMobileMenuOpen = ref(false)\n\nconst navItems = [\n  { label: 'Dashboard', path: '/' },\n  { label: 'Board', path: '/board' },\n  { label: 'Cells', path: '/cells' },\n  { label: 'Programs', path: '/programs' },\n  { label: 'Archives', path: '/archives' }\n]\n</script>\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderList","_ssrRenderClass","_ssrInterpolate","_push","_parent","_createVNode","_createTextVNode","_toDisplayString"],"mappings":"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"}