{"version":3,"file":"archives-D2fhh69I.js","sources":["../../../../../../../app/composables/useArchive.ts","../../../../../../../app/pages/archives.vue"],"sourcesContent":["export const useArchive = () => {\n  const { fetchWithAuth } = useApi();\n\n  const getArchives = async () => {\n    return fetchWithAuth('/archive');\n  };\n\n  const getArchive = async (id: string) => {\n    return fetchWithAuth(`/archive/${id}`);\n  };\n\n  const createArchive = async (data: any) => {\n    return fetchWithAuth('/archive', {\n      method: 'POST',\n      body: data,\n    });\n  };\n\n  const updateArchive = async (id: string, data: any) => {\n    return fetchWithAuth(`/archive/${id}`, {\n      method: 'PATCH',\n      body: data,\n    });\n  };\n\n  const deleteArchive = async (id: string) => {\n    return fetchWithAuth(`/archive/${id}`, {\n      method: 'DELETE',\n    });\n  };\n\n  return {\n    getArchives,\n    getArchive,\n    createArchive,\n    updateArchive,\n    deleteArchive,\n  };\n};\n","<script setup lang=\"ts\">\nconst { getArchives, createArchive, updateArchive, deleteArchive } = useArchive()\nconst { data: archives, refresh } = await useAsyncData('admin-archives', () => getArchives())\n\nconst showModal = ref(false)\nconst editingId = ref<string | null>(null)\nconst form = reactive({\n  title: '',\n  description: '',\n  type: 'speech',\n  date: '',\n  year: new Date().getFullYear(),\n  month: '',\n  fileUrl: '',\n  thumbnailUrl: ''\n})\nconst loading = ref(false)\n\nconst openCreate = () => {\n  editingId.value = null\n  Object.assign(form, { title: '', description: '', type: 'speech', date: '', year: new Date().getFullYear(), month: '', fileUrl: '', thumbnailUrl: '' })\n  showModal.value = true\n}\n\nconst openEdit = (archive: any) => {\n  editingId.value = archive._id\n  Object.assign(form, { ...archive, date: archive.date ? new Date(archive.date).toISOString().split('T')[0] : '' })\n  showModal.value = true\n}\n\nconst handleSubmit = async () => {\n  loading.value = true\n  try {\n    if (editingId.value) {\n      await updateArchive(editingId.value, form)\n    } else {\n      await createArchive(form)\n    }\n    await refresh()\n    showModal.value = false\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleDelete = async (id: string) => {\n  if (confirm('Are you sure you want to delete this archive item?')) {\n    await deleteArchive(id)\n    await refresh()\n  }\n}\n\nuseHead({\n  title: 'Archives Management | PANAFSTRAG',\n})\n\ndefinePageMeta({\n  middleware: 'auth'\n})\n</script>\n\n<template>\n  <div class=\"space-y-12\">\n    <div class=\"flex items-center justify-between\">\n      <div>\n        <h1 class=\"text-4xl font-black mb-2 tracking-tight\">Archives Management</h1>\n        <p class=\"text-slate-500 font-bold\">Manage speeches, reports, and research resources</p>\n      </div>\n      <button @click=\"openCreate\" class=\"px-8 py-4 bg-indigo-600 text-white font-black rounded-2xl shadow-xl shadow-indigo-100 dark:shadow-none hover:-translate-y-1 active:scale-95 transition-all\">\n        ADD RESOURCE\n      </button>\n    </div>\n\n    <!-- Table -->\n    <div class=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden\">\n      <table class=\"w-full text-left border-collapse\">\n        <thead>\n          <tr class=\"bg-slate-50 dark:bg-slate-800/50\">\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400\">Resource</th>\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400\">Type</th>\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400\">Year</th>\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400 text-right\">Actions</th>\n          </tr>\n        </thead>\n        <tbody class=\"divide-y divide-slate-100 dark:divide-slate-800\">\n          <tr v-for=\"item in (archives as any[])\" :key=\"item._id\" class=\"hover:bg-slate-50/50 dark:hover:bg-slate-800/20 transition-colors\">\n            <td class=\"px-8 py-6\">\n              <div>\n                <p class=\"font-black text-slate-900 dark:text-white\">{{ item.title }}</p>\n                <p class=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest line-clamp-1\">{{ item.description }}</p>\n              </div>\n            </td>\n             <td class=\"px-8 py-6\">\n              <span class=\"px-3 py-1 bg-slate-50 dark:bg-slate-800 rounded-full text-[10px] font-black uppercase tracking-widest text-slate-400\">\n                {{ item.type }}\n              </span>\n            </td>\n            <td class=\"px-8 py-6 font-bold text-sm\">{{ item.year }}</td>\n            <td class=\"px-8 py-6 text-right\">\n              <div class=\"flex items-center justify-end gap-2\">\n                 <button @click=\"openEdit(item)\" class=\"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg transition-all shadow-sm\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n                  </svg>\n                </button>\n                <button @click=\"handleDelete(item._id)\" class=\"p-2 hover:bg-red-50 text-red-400 rounded-lg transition-all shadow-sm\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                  </svg>\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Modal -->\n    <Modal :show=\"showModal\" :title=\"editingId ? 'Edit Resource' : 'New Resource'\" @close=\"showModal = false\">\n      <div class=\"space-y-8\">\n        <div class=\"space-y-6\">\n          <div>\n            <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Title</label>\n            <input v-model=\"form.title\" type=\"text\" class=\"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium\" />\n          </div>\n          <div class=\"grid grid-cols-3 gap-4\">\n            <div>\n              <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Type</label>\n              <select v-model=\"form.type\" class=\"w-full px-4 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl text-xs font-black tracking-widest uppercase\">\n                <option value=\"speech\">Speech</option>\n                <option value=\"report\">Annual Report</option>\n                <option value=\"media\">Media</option>\n                <option value=\"research\">Research Paper</option>\n              </select>\n            </div>\n            <div>\n              <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Year</label>\n              <input v-model.number=\"form.year\" type=\"number\" class=\"w-full px-4 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl text-xs font-bold\" />\n            </div>\n            <div>\n              <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Date</label>\n              <input v-model=\"form.date\" type=\"date\" class=\"w-full px-4 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl text-xs font-bold\" />\n            </div>\n          </div>\n        </div>\n\n        <div>\n           <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Description</label>\n           <textarea v-model=\"form.description\" rows=\"3\" class=\"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium text-sm\"></textarea>\n        </div>\n\n        <div class=\"grid grid-cols-2 gap-8\">\n          <div>\n            <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Resource File (URL)</label>\n            <input v-model=\"form.fileUrl\" type=\"url\" placeholder=\"https://...\" class=\"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium text-sm\" />\n          </div>\n          <div>\n            <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Thumbnail Image</label>\n            <MediaUpload v-model=\"form.thumbnailUrl\" folder=\"archives\" />\n          </div>\n        </div>\n      </div>\n\n      <template #actions>\n        <button @click=\"showModal = false\" class=\"px-8 py-4 text-slate-500 font-black text-xs uppercase tracking-widest\">CANCEL</button>\n        <button @click=\"handleSubmit\" :disabled=\"loading\" class=\"px-8 py-4 bg-indigo-600 text-white font-black rounded-2xl shadow-lg shadow-indigo-100 dark:shadow-none hover:-translate-y-1 active:scale-95 transition-all disabled:opacity-50\">\n          {{ loading ? 'SAVING...' : 'SAVE CHANGES' }}\n        </button>\n      </template>\n    </Modal>\n  </div>\n</template>\n"],"names":["_withAsyncContext","_ssrRenderAttrs","_mergeProps","_ssrRenderList","_unref","_ssrInterpolate","_push","_parent","_createVNode","_ssrRenderAttr","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrLooseEqual","_vModelText","_vModelSelect"],"mappings":"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"}