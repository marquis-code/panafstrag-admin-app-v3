{"file":"cells-qOc1OIxA.js","mappings":"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","names":["_withAsyncContext","_ssrRenderAttrs","_mergeProps","_ssrRenderList","_unref","_ssrInterpolate","_push","_parent","_createVNode","_ssrRenderAttr","_vModelText"],"sources":["../../../../../../../app/composables/useCell.ts","../../../../../../../app/pages/cells.vue"],"sourcesContent":["export const useCell = () => {\n  const { fetchWithAuth } = useApi();\n\n  const getCells = async () => {\n    return fetchWithAuth('/cell');\n  };\n\n  const getCell = async (id: string) => {\n    return fetchWithAuth(`/cell/${id}`);\n  };\n\n  const createCell = async (data: any) => {\n    return fetchWithAuth('/cell', {\n      method: 'POST',\n      body: data,\n    });\n  };\n\n  const updateCell = async (id: string, data: any) => {\n    return fetchWithAuth(`/cell/${id}`, {\n      method: 'PATCH',\n      body: data,\n    });\n  };\n\n  const deleteCell = async (id: string) => {\n    return fetchWithAuth(`/cell/${id}`, {\n      method: 'DELETE',\n    });\n  };\n\n  return {\n    getCells,\n    getCell,\n    createCell,\n    updateCell,\n    deleteCell,\n  };\n};\n","<script setup lang=\"ts\">\nconst { getCells, createCell, updateCell, deleteCell } = useCell()\nconst { data: cells, refresh } = await useAsyncData('admin-cells', () => getCells())\n\nconst showModal = ref(false)\nconst editingId = ref<string | null>(null)\nconst form = reactive({\n  name: '',\n  location: '',\n  description: '',\n  leadName: '',\n  imageUrl: ''\n})\nconst loading = ref(false)\n\nconst openCreate = () => {\n  editingId.value = null\n  Object.assign(form, { name: '', location: '', description: '', leadName: '', imageUrl: '' })\n  showModal.value = true\n}\n\nconst openEdit = (cell: any) => {\n  editingId.value = cell._id\n  Object.assign(form, { ...cell })\n  showModal.value = true\n}\n\nconst handleSubmit = async () => {\n  loading.value = true\n  try {\n    if (editingId.value) {\n      await updateCell(editingId.value, form)\n    } else {\n      await createCell(form)\n    }\n    await refresh()\n    showModal.value = false\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleDelete = async (id: string) => {\n  if (confirm('Are you sure you want to delete this cell?')) {\n    await deleteCell(id)\n    await refresh()\n  }\n}\n\nuseHead({\n  title: 'Cells Management | PANAFSTRAG',\n})\n\ndefinePageMeta({\n  middleware: 'auth'\n})\n</script>\n\n<template>\n  <div class=\"space-y-12\">\n    <div class=\"flex items-center justify-between\">\n      <div>\n        <h1 class=\"text-4xl font-black mb-2 tracking-tight\">Cells Management</h1>\n        <p class=\"text-slate-500 font-bold\">Manage organizational cells and regional leads</p>\n      </div>\n      <button @click=\"openCreate\" class=\"px-8 py-4 bg-indigo-600 text-white font-black rounded-2xl shadow-xl shadow-indigo-100 dark:shadow-none hover:-translate-y-1 active:scale-95 transition-all\">\n        NEW CELL\n      </button>\n    </div>\n\n    <!-- Table -->\n    <div class=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden\">\n      <table class=\"w-full text-left border-collapse\">\n        <thead>\n          <tr class=\"bg-slate-50 dark:bg-slate-800/50\">\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400\">Cell Name</th>\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400\">Location</th>\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400\">Lead</th>\n            <th class=\"px-8 py-6 text-xs font-black uppercase tracking-widest text-slate-400 text-right\">Actions</th>\n          </tr>\n        </thead>\n        <tbody class=\"divide-y divide-slate-100 dark:divide-slate-800\">\n          <tr v-for=\"cell in (cells as any[])\" :key=\"cell._id\" class=\"hover:bg-slate-50/50 dark:hover:bg-slate-800/20 transition-colors\">\n            <td class=\"px-8 py-6\">\n              <div class=\"flex items-center gap-4\">\n                <div class=\"w-12 h-12 rounded-xl bg-slate-100 dark:bg-slate-800 overflow-hidden\">\n                  <img v-if=\"cell.imageUrl\" :src=\"cell.imageUrl\" class=\"w-full h-full object-cover\" />\n                </div>\n                <p class=\"font-black text-slate-900 dark:text-white\">{{ cell.name }}</p>\n              </div>\n            </td>\n            <td class=\"px-8 py-6\">\n              <span class=\"text-sm font-bold text-slate-600 dark:text-slate-400\">{{ cell.location }}</span>\n            </td>\n            <td class=\"px-8 py-6\">\n              <div class=\"flex items-center gap-3\">\n                <div class=\"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-[10px] font-black uppercase\">\n                  {{ cell.leadName?.charAt(0) }}\n                </div>\n                <p class=\"text-xs font-bold\">{{ cell.leadName }}</p>\n              </div>\n            </td>\n            <td class=\"px-8 py-6 text-right\">\n              <div class=\"flex items-center justify-end gap-2\">\n                 <button @click=\"openEdit(cell)\" class=\"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg transition-all shadow-sm\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n                  </svg>\n                </button>\n                <button @click=\"handleDelete(cell._id)\" class=\"p-2 hover:bg-red-50 text-red-400 rounded-lg transition-all shadow-sm\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                  </svg>\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Modal -->\n    <Modal :show=\"showModal\" :title=\"editingId ? 'Edit Cell' : 'New Cell'\" @close=\"showModal = false\">\n      <div class=\"space-y-8\">\n        <div class=\"grid md:grid-cols-2 gap-8\">\n          <div class=\"space-y-6\">\n            <div>\n              <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Cell Name</label>\n              <input v-model=\"form.name\" type=\"text\" class=\"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium\" />\n            </div>\n            <div>\n              <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Location</label>\n              <input v-model=\"form.location\" type=\"text\" placeholder=\"e.g. Lagos, Nigeria\" class=\"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium\" />\n            </div>\n          </div>\n          <div>\n            <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Cover Image</label>\n            <MediaUpload v-model=\"form.imageUrl\" folder=\"cells\" />\n          </div>\n        </div>\n\n        <div>\n          <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Description</label>\n          <textarea v-model=\"form.description\" rows=\"4\" class=\"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium\"></textarea>\n        </div>\n\n        <div>\n          <label class=\"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-1\">Lead Researcher Name</label>\n          <input v-model=\"form.leadName\" type=\"text\" class=\"w-full px-6 py-4 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl focus:ring-2 focus:ring-indigo-600 outline-none transition-all font-medium\" />\n        </div>\n      </div>\n\n      <template #actions>\n        <button @click=\"showModal = false\" class=\"px-8 py-4 text-slate-500 font-black text-xs uppercase tracking-widest\">CANCEL</button>\n        <button @click=\"handleSubmit\" :disabled=\"loading\" class=\"px-8 py-4 bg-indigo-600 text-white font-black rounded-2xl shadow-lg shadow-indigo-100 dark:shadow-none hover:-translate-y-1 active:scale-95 transition-all disabled:opacity-50\">\n          {{ loading ? 'SAVING...' : 'SAVE CHANGES' }}\n        </button>\n      </template>\n    </Modal>\n  </div>\n</template>\n"],"version":3}