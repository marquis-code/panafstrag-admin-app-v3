{"file":"MediaUpload-DEt6RbaD.js","mappings":";;;;;;;;;;;;;+BACE,CAqCWA,WAAA;YA5BI,QAAA,MAAI;;cASA,QAAA,MAAI;gVAEuC,QAAA,KAAK,CAAA,iYAAA;;;AAU9CC,gBAAAA,KAAAA,OAAO,SAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFrC,UAAM,QAAQ;AAMY,WAAA;AAC1B,UAAM,UAAU,IAAI,KAAK;AACzB,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,aAAa,IAAI,MAAM,UAAU;AAEvC,UAAM,MAAM,MAAM,YAAY,CAAC,QAAQ;AACrC,iBAAW,QAAQ;AAAA,IACrB,CAAC;;mBA1CMC,eAAAC,WAAA,EAAA,OAAM,eAAW,MAAA,CAAA,wEAG6BC,MAAA,UAAA,KAAU,sPAAA,CAAA;UAK9CA,MAAA,UAAA,GAAU;AAAG,cAAA,OAAAC,cAAA,OAAKD,MAAA,UAAA,CAAU,CAAA,uDAAA;AAAA;;;WAE3BA,MAAA,OAAA,GAAO;;;;;UAQRA,MAAA,OAAA,GAAO;;;;;;UAKTA,MAAA,KAAA,GAAK;4EAA4CA,MAAA,KAAA,CAAK,CAAA,QAAA;AAAA;;;;;;;;;;;;;;","names":["_push","$slots","_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderAttr"],"sources":["../../../../../../../app/components/Modal.vue","../../../../../../../app/components/MediaUpload.vue"],"sourcesContent":["<template>\n  <Teleport to=\"body\">\n    <Transition\n      enter-active-class=\"transition duration-300 ease-out\"\n      enter-from-class=\"opacity-0\"\n      enter-to-class=\"opacity-100\"\n      leave-active-class=\"transition duration-200 ease-in\"\n      leave-from-class=\"opacity-100\"\n      leave-to-class=\"opacity-0\"\n    >\n      <div v-if=\"show\" class=\"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm\">\n        <Transition\n          enter-active-class=\"transition duration-300 ease-out\"\n          enter-from-class=\"opacity-0 scale-95 translate-y-4\"\n          enter-to-class=\"opacity-100 scale-100 translate-y-0\"\n          leave-active-class=\"transition duration-200 ease-in\"\n          leave-from-class=\"opacity-100 scale-100 translate-y-0\"\n          leave-to-class=\"opacity-0 scale-95 translate-y-4\"\n        >\n          <div v-if=\"show\" class=\"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden\">\n            <div class=\"px-10 py-8 flex items-center justify-between border-b border-slate-50 dark:border-slate-800\">\n              <h3 class=\"text-2xl font-black tracking-tight\">{{ title }}</h3>\n              <button @click=\"$emit('close')\" class=\"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n            <div class=\"px-10 py-10 max-h-[70vh] overflow-y-auto\">\n              <slot />\n            </div>\n            <div v-if=\"$slots.actions\" class=\"px-10 py-8 bg-slate-50 dark:bg-slate-800/50 flex justify-end gap-3\">\n              <slot name=\"actions\" />\n            </div>\n          </div>\n        </Transition>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<script setup>\ndefineProps({\n  show: Boolean,\n  title: String\n})\ndefineEmits(['close'])\n</script>\n","<template>\n  <div class=\"space-y-4\">\n    <div \n      class=\"relative aspect-video w-full rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-800 flex flex-col items-center justify-center gap-3 bg-slate-50 dark:bg-slate-900/50 hover:border-indigo-600 transition-all group overflow-hidden\"\n      :class=\"{ 'border-indigo-600 bg-indigo-50/10': isDragging }\"\n      @dragover.prevent=\"isDragging = true\"\n      @dragleave.prevent=\"isDragging = false\"\n      @drop.prevent=\"handleDrop\"\n    >\n      <img v-if=\"previewUrl\" :src=\"previewUrl\" class=\"absolute inset-0 w-full h-full object-cover\" />\n      \n      <div v-if=\"!loading\" class=\"relative z-10 flex flex-col items-center\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-10 w-10 text-slate-400 group-hover:text-indigo-600 transition-colors\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1m-7-3l-3-3m0 0l-3 3m3-3v12\" />\n        </svg>\n        <p class=\"text-xs font-black text-slate-400 mt-2 uppercase tracking-widest\">Click or drag to upload</p>\n        <input type=\"file\" @change=\"handleFileSelect\" class=\"absolute inset-0 opacity-0 cursor-pointer\" accept=\"image/*\" />\n      </div>\n\n      <div v-if=\"loading\" class=\"relative z-10 flex flex-col items-center\">\n        <div class=\"w-10 h-10 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"></div>\n        <p class=\"text-xs font-black text-indigo-600 mt-4 uppercase tracking-widest\">Uploading...</p>\n      </div>\n    </div>\n    <div v-if=\"error\" class=\"text-xs font-bold text-red-500\">{{ error }}</div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nconst props = defineProps<{\n  modelValue?: string,\n  folder?: string\n}>()\nconst emit = defineEmits(['update:modelValue'])\n\nconst { fetchWithAuth } = useApi()\nconst loading = ref(false)\nconst error = ref('')\nconst isDragging = ref(false)\nconst previewUrl = ref(props.modelValue)\n\nwatch(() => props.modelValue, (val) => {\n  previewUrl.value = val\n})\n\nconst uploadFile = async (file: File) => {\n  loading.value = true\n  error.value = ''\n  \n  const formData = new FormData()\n  formData.append('file', file)\n  if (props.folder) formData.append('folder', props.folder)\n\n  try {\n    const res: any = await fetchWithAuth('/media/upload', {\n      method: 'POST',\n      body: formData\n    })\n    previewUrl.value = res.secure_url\n    emit('update:modelValue', res.secure_url)\n  } catch (err: any) {\n    error.value = 'Upload failed. Please try again.'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleFileSelect = (e: Event) => {\n  const file = (e.target as HTMLInputElement).files?.[0]\n  if (file) uploadFile(file)\n}\n\nconst handleDrop = (e: DragEvent) => {\n  isDragging.value = false\n  const file = e.dataTransfer?.files?.[0]\n  if (file) uploadFile(file)\n}\n</script>\n"],"version":3}