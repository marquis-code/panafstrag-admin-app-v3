import{_ as W}from"./iZQW2eg-.js";import{_ as Z,a as J}from"./CErgheon.js";import{_ as K}from"./Bn3eorda.js";import{_ as Y}from"./CmW_OHVS.js";import{o as q,r as n,d as X,u as Q,a as p,c,b as t,e as E,f as _,g as v,F as V,h as S,w as A,i,v as u,p as M,j as tt,t as m,k as et,q as at}from"./BwQilRvH.js";import{G as w,u as I}from"./BceSs3DB.js";import"./DmSjj8Yx.js";const U={getPrograms:()=>w.get("/program"),getProgram:l=>w.get(`/program/${l}`),createProgram:l=>w.post("/program",l),updateProgram:(l,r)=>w.patch(`/program/${l}`,r),deleteProgram:l=>w.delete(`/program/${l}`)},st=()=>{const l=n(!1),r=n([]),g=n(null),d=async()=>{l.value=!0,g.value=null;try{const o=await U.getPrograms();return[200,201].includes(o?.status)&&(r.value=o.data?.data??o.data??[]),o}catch(o){g.value=o?.message||"Failed to fetch programs"}finally{l.value=!1}};return q(d),{loading:l,programs:r,error:g,fetchPrograms:d}},lt=()=>{const l=n(!1),{showToast:r}=I();return{loading:l,createProgram:async d=>{l.value=!0;try{const o=await U.createProgram(d);return[200,201].includes(o?.status)&&r({title:"Success",message:"Program created successfully",toastType:"success",duration:3e3}),o}catch(o){r({title:"Error",message:o?.message||"Failed to create program",toastType:"error",duration:3e3})}finally{l.value=!1}}}},ot=()=>{const l=n(!1),{showToast:r}=I();return{loading:l,updateProgram:async(d,o)=>{l.value=!0;try{const f=await U.updateProgram(d,o);return[200,201].includes(f?.status)&&r({title:"Success",message:"Program updated successfully",toastType:"success",duration:3e3}),f}catch(f){r({title:"Error",message:f?.message||"Failed to update program",toastType:"error",duration:3e3})}finally{l.value=!1}}}},rt=()=>{const l=n(!1),{showToast:r}=I();return{loading:l,deleteProgram:async d=>{l.value=!0;try{const o=await U.deleteProgram(d);return[200,201].includes(o?.status)&&r({title:"Success",message:"Program deleted successfully",toastType:"success",duration:3e3}),o}catch(o){r({title:"Error",message:o?.message||"Failed to delete program",toastType:"error",duration:3e3})}finally{l.value=!1}}}},nt={class:"space-y-12"},it={key:0,class:"py-24 flex justify-center"},dt={key:1},pt={key:2,class:"bg-white border border-gray-100 shadow-sm overflow-hidden"},ct={class:"overflow-x-auto"},ut={class:"w-full text-left border-collapse min-w-[900px]"},gt={class:"divide-y divide-gray-100"},bt={class:"px-8 py-6"},xt={class:"flex items-center gap-4"},mt={class:"w-12 h-12 bg-gray-100 overflow-hidden border border-gray-100 grayscale hover:grayscale-0 transition-all duration-500"},ft=["src"],yt={key:1,class:"w-full h-full flex items-center justify-center text-[10px] font-black text-gray-300 uppercase"},kt={class:"max-w-xs"},vt={class:"font-black text-black uppercase tracking-tight line-clamp-1 group-hover:text-black transition-colors"},wt={class:"text-[9px] font-black text-gray-400 uppercase italic line-clamp-1"},ht={class:"px-8 py-6"},Tt={class:"px-3 py-1 border border-black text-black text-[9px] font-black uppercase tracking-widest group-hover:bg-black group-hover:text-white transition-colors"},Pt={class:"px-8 py-6"},Ct={class:"px-8 py-6"},Ut={class:"text-[10px] font-black text-gray-400 uppercase tracking-widest group-hover:text-black transition-colors"},Dt={class:"px-8 py-6 text-right"},_t={class:"flex items-center justify-end gap-3"},It=["onClick"],Et=["onClick"],Vt={class:"space-y-12 py-4"},St={class:"space-y-6"},At={class:"grid md:grid-cols-2 gap-10"},Mt={class:"space-y-6"},Nt={class:"grid grid-cols-2 gap-6"},Ot={class:"space-y-6"},Lt={class:"grid md:grid-cols-3 gap-8"},Ft={class:"space-y-6"},jt={class:"grid md:grid-cols-2 gap-8"},Bt={class:"space-y-6"},Rt={class:"flex gap-4 mb-6"},$t={class:"flex flex-wrap gap-2"},Ht=["onClick"],Gt={class:"space-y-6"},zt=["disabled"],te=X({__name:"programs",setup(l){const{fetchPrograms:r,programs:g,loading:d}=st(),{createProgram:o}=lt(),{updateProgram:f}=ot(),{deleteProgram:N}=rt(),y=n(!1),h=n(!1),T=n(null),D=n(!1),k=n(null),s=et({title:"",theme:"",description:"",type:"upcoming",startDate:"",endDate:"",date:"",imageUrl:"",uploadedDocumentFiles:[],uploadedVideoUrl:"",zoomMeetingUrl:"",status:"pending",registerLink:""}),P=n(!1),b=n(""),O=()=>{k.value=null,Object.assign(s,{title:"",theme:"",description:"",type:"upcoming",startDate:"",endDate:"",date:"",imageUrl:"",uploadedDocumentFiles:[],uploadedVideoUrl:"",zoomMeetingUrl:"",status:"pending",registerLink:""}),y.value=!0},L=x=>{k.value=x._id,Object.assign(s,{...x,date:x.date?new Date(x.date).toISOString().split("T")[0]:""}),y.value=!0},F=async()=>{P.value=!0;try{k.value?await f(k.value,s):await o(s),await r(),y.value=!1}finally{P.value=!1}},j=x=>{T.value=x,h.value=!0},B=async()=>{if(T.value){D.value=!0;try{await N(T.value),await r(),h.value=!1}finally{D.value=!1,T.value=null}}};return Q({title:"Programs Management | PANAFSTRAG"}),(x,e)=>{const R=W,$=Z,H=K,G=Y,z=J;return p(),c("div",nt,[t("div",{class:"flex flex-col md:flex-row md:items-end justify-between gap-6"},[e[18]||(e[18]=t("div",null,[t("p",{class:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-400 mb-2"},"Operational Sector"),t("h1",{class:"text-4xl lg:text-6xl font-black tracking-tighter uppercase italic leading-none text-black"},[E(" Programs "),t("span",{class:"not-italic text-gray-400 leading-none"},"Management.")])],-1)),t("button",{onClick:O,class:"px-10 py-5 bg-black text-white font-black text-[10px] tracking-[0.3em] uppercase hover:bg-gray-800 active:scale-95 transition-all shadow-xl shadow-black/10"}," NEW PROGRAM ")]),_(d)?(p(),c("div",it,[v(R)])):_(g)?.length?(p(),c("div",pt,[t("div",ct,[t("table",ut,[e[21]||(e[21]=t("thead",null,[t("tr",{class:"bg-gray-50 border-b border-gray-100"},[t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Initiative"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Classification"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Lifecycle"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Timeline"),t("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400 text-right"},"Actions")])],-1)),t("tbody",gt,[(p(!0),c(V,null,S(_(g),a=>(p(),c("tr",{key:a._id,class:"hover:bg-gray-50/50 transition-colors group"},[t("td",bt,[t("div",xt,[t("div",mt,[a.imageUrl?(p(),c("img",{key:0,src:a.imageUrl,class:"w-full h-full object-cover"},null,8,ft)):(p(),c("div",yt," NO_IMG "))]),t("div",kt,[t("p",vt,m(a.title),1),t("p",wt,m(a.theme),1)])])]),t("td",ht,[t("span",Tt,m(a.type),1)]),t("td",Pt,[t("span",{class:at(["px-2 py-0.5 border text-[8px] font-black uppercase tracking-widest",a.status==="completed"?"border-gray-900 text-gray-900":"border-gray-200 text-gray-400 italic"])},m(a.status),3)]),t("td",Ct,[t("p",Ut,m(new Date(a.date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).toUpperCase()),1)]),t("td",Dt,[t("div",_t,[t("button",{onClick:C=>L(a),class:"p-2 hover:bg-black hover:text-white border border-transparent hover:border-black transition-all"},[...e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,It),t("button",{onClick:C=>j(a._id),class:"p-2 text-gray-300 hover:text-black hover:bg-white transition-all"},[...e[20]||(e[20]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Et)])])]))),128))])])])])):(p(),c("div",dt,[v($,{title:"NO DATA",message:"The institutional calendar sector is currently unpopulated."})])),v(G,{show:y.value,title:k.value?"EDIT INITIATIVE":"NEW INITIATIVE",onClose:e[16]||(e[16]=a=>y.value=!1)},{actions:A(()=>[t("button",{onClick:e[15]||(e[15]=a=>y.value=!1),class:"px-10 py-5 text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-black transition-colors"},"ABORT"),t("button",{onClick:F,disabled:P.value,class:"px-12 py-5 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-gray-800 disabled:opacity-30 transition-all"},m(P.value?"PROCESSING...":"AUTHORIZE INITIATIVE"),9,zt)]),default:A(()=>[t("div",Vt,[t("section",St,[e[29]||(e[29]=t("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Identification",-1)),t("div",At,[t("div",Mt,[t("div",null,[e[22]||(e[22]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Program Title",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.title=a),type:"text",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm"},null,512),[[u,s.title]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Strategic Theme",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.theme=a),type:"text",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm italic"},null,512),[[u,s.theme]])]),t("div",Nt,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2 text-center md:text-left"},"Classification",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.type=a),class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none text-[10px] font-black tracking-widest uppercase"},[...e[24]||(e[24]=[t("option",{value:"upcoming"},"UPCOMING",-1),t("option",{value:"past"},"PAST RECORD",-1)])],512),[[M,s.type]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2 text-center md:text-left"},"Lifecycle Status",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.status=a),class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none text-[10px] font-black tracking-widest uppercase"},[...e[26]||(e[26]=[t("option",{value:"pending"},"PENDING",-1),t("option",{value:"completed"},"COMPLETED",-1)])],512),[[M,s.status]])])])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-4"},"Visual Identifier",-1)),v(H,{modelValue:s.imageUrl,"onUpdate:modelValue":e[4]||(e[4]=a=>s.imageUrl=a),folder:"programs"},null,8,["modelValue"])])])]),t("section",Ot,[e[33]||(e[33]=t("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Operational Timeline",-1)),t("div",Lt,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Commencement",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.startDate=a),type:"text",placeholder:"e.g. MON JAN 01",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm"},null,512),[[u,s.startDate]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Termination",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.endDate=a),type:"text",placeholder:"e.g. WED JAN 03",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm"},null,512),[[u,s.endDate]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Index Date (System)",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.date=a),type:"date",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none text-[10px] font-black tracking-widest uppercase"},null,512),[[u,s.date]])])])]),t("section",Ft,[e[36]||(e[36]=t("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Digital Sector",-1)),t("div",jt,[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Broadcast Stream URL",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.uploadedVideoUrl=a),type:"url",placeholder:"HTTPS://YOUTUBE.COM/...",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm"},null,512),[[u,s.uploadedVideoUrl]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Virtual Hub (Zoom)",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>s.zoomMeetingUrl=a),type:"url",placeholder:"HTTPS://ZOOM.US/...",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm"},null,512),[[u,s.zoomMeetingUrl]])])])]),t("section",Bt,[e[39]||(e[39]=t("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Document Repository",-1)),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-4"},"Annexed Intelligence Files",-1)),t("div",Rt,[i(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>b.value=a),onKeyup:e[11]||(e[11]=tt(()=>{b.value&&(s.uploadedDocumentFiles.push(b.value),b.value="")},["enter"])),type:"url",placeholder:"HTTPS://DOC-ALPHA.PDF",class:"flex-1 px-4 py-3 bg-gray-50 border-none text-[10px] font-black tracking-widest uppercase outline-none focus:ring-1 focus:ring-black"},null,544),[[u,b.value]]),t("button",{onClick:e[12]||(e[12]=()=>{b.value&&(s.uploadedDocumentFiles.push(b.value),b.value="")}),class:"px-8 bg-black text-white text-[9px] font-black uppercase tracking-widest"},"ANNEX")]),t("div",$t,[(p(!0),c(V,null,S(s.uploadedDocumentFiles,(a,C)=>(p(),c("span",{key:C,class:"pl-4 pr-1 py-1.5 bg-gray-50 border border-gray-100 rounded-sm text-[10px] font-black flex items-center gap-3 italic"},[E(m(a?.split("/").pop()?.toUpperCase()||"DOCUMENT")+" ",1),t("button",{onClick:Wt=>s.uploadedDocumentFiles.splice(C,1),class:"p-1 hover:text-red-500 transition-colors"},[...e[37]||(e[37]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ht)]))),128))])])]),t("section",Gt,[e[42]||(e[42]=t("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Narrative Framework",-1)),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Detailed Briefing",-1)),i(t("textarea",{"onUpdate:modelValue":e[13]||(e[13]=a=>s.description=a),rows:"4",class:"w-full p-4 bg-gray-50 border-none outline-none focus:ring-1 focus:ring-black transition-all font-medium text-sm leading-relaxed"},null,512),[[u,s.description]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Portal Access Link (Optional)",-1)),i(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>s.registerLink=a),type:"url",placeholder:"HTTPS://PORTAL.ACCESS",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm"},null,512),[[u,s.registerLink]])])])])]),_:1},8,["show","title"]),v(z,{show:h.value,title:"DELETE INITIATIVE",message:"Are you sure you want to remove this initiative from the operational calendar? This operation is permanent.",loading:D.value,onClose:e[17]||(e[17]=a=>h.value=!1),onConfirm:B},null,8,["show","loading"])])}}});export{te as default};
