import{_ as v}from"./BtHF7Lbb.js";import{_ as h}from"./CAmTSZhA.js";import{r as p,d as T,a as A,b as g,c as m,e,x as b,i as u,A as L,j as x,v as f,f as i,t as k,g as N,y as S,z as C,q as P}from"./BkOmVWpN.js";import{a as R}from"./DBUiy-70.js";import{u as I}from"./Bmbvx39S.js";import{u as y}from"./C1hZ1d1p.js";import"./C_Yi8Lnb.js";const V=()=>{const l=p(!1),r=p(null),{showToast:n}=I();return{loading:l,error:r,login:async a=>{l.value=!0,r.value=null;try{const s=await R.login(a);if([200,201].includes(s?.status)){const o=y("auth_token");o.value=s.data?.accessToken;const t=y("user_data");return t.value=JSON.stringify(s.data?.user),n({title:"Success",message:"Logged in successfully",toastType:"success",duration:3e3}),s.data}return s}catch(s){r.value=s?.message||"Login failed",n({title:"Error",message:s?.message||"Login failed",toastType:"error",duration:3e3})}finally{l.value=!1}}}},E={class:"max-w-md mx-auto py-20"},U={class:"bg-white border border-gray-100 p-10 shadow-2xl"},B={class:"text-center mb-10"},G={key:0,class:"p-4 border border-black text-black text-[10px] font-black uppercase tracking-widest text-center"},O=["disabled"],q={class:"mt-12 text-center"},H={class:"text-gray-400 text-[9px] font-black uppercase tracking-widest"},Z=T({__name:"login",setup(l){const{login:r,error:n,loading:c}=V(),a=C({email:"",password:""}),s=async()=>{try{const o=await r(a);(o?.accessToken||o?._id)&&P("/")}catch{}};return A({title:"Login | PANAFSTRAG"}),(o,t)=>{const w=v,_=h;return g(),m("div",E,[e("div",U,[e("div",B,[b(w,{class:"justify-center mb-6"}),t[2]||(t[2]=e("h1",{class:"text-3xl font-black tracking-tighter uppercase italic"},[u("Institutional "),e("span",{class:"not-italic text-gray-400"},"Login.")],-1)),t[3]||(t[3]=e("p",{class:"text-gray-400 text-[10px] font-black uppercase tracking-[0.2em] mt-3"},"Personnel Authorization Sector",-1))]),e("form",{onSubmit:L(s,["prevent"]),class:"space-y-8"},[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"},"Master Identity (Email)",-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.email=d),type:"email",required:"",placeholder:"AUTHORITY@PANAFSTRAG.ORG",class:"w-full px-0 py-4 bg-transparent border-b border-gray-100 focus:border-black outline-none transition-all font-bold text-sm uppercase tracking-widest placeholder:text-gray-200"},null,512),[[f,a.email]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"},"Access Protocol (Password)",-1)),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>a.password=d),type:"password",required:"",placeholder:"••••••••",class:"w-full px-0 py-4 bg-transparent border-b border-gray-100 focus:border-black outline-none transition-all font-bold text-sm uppercase tracking-widest placeholder:text-gray-200"},null,512),[[f,a.password]])]),i(n)?(g(),m("div",G,k(i(n)),1)):N("",!0),e("button",{type:"submit",disabled:i(c),class:"w-full py-6 bg-black text-white font-black text-[10px] tracking-[0.3em] uppercase hover:bg-gray-800 active:scale-95 transition-all shadow-xl shadow-black/10 disabled:opacity-30"},k(i(c)?"AUTHORIZING...":"BYPASS SECURITY"),9,O)],32),e("div",q,[e("p",H,[t[7]||(t[7]=u(" No institutional record? ",-1)),b(_,{to:"/register",class:"text-black underline underline-offset-4 hover:tracking-widest transition-all"},{default:S(()=>[...t[6]||(t[6]=[u("Register Protocol",-1)])]),_:1})])])])])}}});export{Z as default};
