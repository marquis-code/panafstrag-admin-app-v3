import{_ as J}from"./BWUR9vJL.js";import{_ as z,a as W}from"./teskAtVw.js";import{_ as X}from"./J5jE4N7I.js";import{_ as Z}from"./CiM4geRk.js";import{o as q,r as n,d as K,z as Q,a as ee,b as d,c as p,e,i as te,f as C,x as f,F as R,h as S,y as D,j as x,v as _,B as I,t as b}from"./C9Jv3MLw.js";import{G as h,u as U}from"./Ce3KchrF.js";import"./D7do-Z31.js";import"./Bf6SRPjp.js";const E={getArchives:a=>h.get("/archive",{params:a}),getArchive:a=>h.get(`/archive/${a}`),createArchive:a=>h.post("/archive",a),updateArchive:(a,l)=>h.patch(`/archive/${a}`,l),deleteArchive:a=>h.delete(`/archive/${a}`)},se=()=>{const a=n(!1),l=n([]),u=n(null),i=async()=>{a.value=!0,u.value=null;try{const r=await E.getArchives();return[200,201].includes(r?.status)&&(l.value=r.data?.data??r.data??[]),r}catch(r){u.value=r?.message||"Failed to fetch archives"}finally{a.value=!1}};return q(i),{loading:a,archives:l,error:u,fetchArchives:i}},ae=()=>{const a=n(!1),{showToast:l}=U();return{loading:a,createArchive:async i=>{a.value=!0;try{const r=await E.createArchive(i);return[200,201].includes(r?.status)&&l({title:"Success",message:"Archive created successfully",toastType:"success",duration:3e3}),r}catch(r){l({title:"Error",message:r?.message||"Failed to create archive",toastType:"error",duration:3e3})}finally{a.value=!1}}}},re=()=>{const a=n(!1),{showToast:l}=U();return{loading:a,updateArchive:async(i,r)=>{a.value=!0;try{const g=await E.updateArchive(i,r);return[200,201].includes(g?.status)&&l({title:"Success",message:"Archive updated successfully",toastType:"success",duration:3e3}),g}catch(g){l({title:"Error",message:g?.message||"Failed to update archive",toastType:"error",duration:3e3})}finally{a.value=!1}}}},oe=()=>{const a=n(!1),{showToast:l}=U();return{loading:a,deleteArchive:async i=>{a.value=!0;try{const r=await E.deleteArchive(i);return[200,201].includes(r?.status)&&l({title:"Success",message:"Archive deleted successfully",toastType:"success",duration:3e3}),r}catch(r){l({title:"Error",message:r?.message||"Failed to delete archive",toastType:"error",duration:3e3})}finally{a.value=!1}}}},le={class:"space-y-12"},ne={key:0,class:"py-24 flex justify-center"},ie={key:1},ce={key:2,class:"bg-white border border-gray-100 shadow-sm overflow-hidden"},ue={class:"overflow-x-auto"},de={class:"w-full text-left border-collapse min-w-[800px]"},pe={class:"divide-y divide-gray-100"},be={class:"px-8 py-6"},ge={class:"font-black text-black uppercase tracking-tight group-hover:text-black transition-colors"},ve={class:"text-[9px] font-black text-gray-400 uppercase tracking-widest line-clamp-1 italic"},xe={class:"px-8 py-6"},ye={class:"px-3 py-1 border border-black text-black text-[9px] font-black uppercase tracking-widest group-hover:bg-black group-hover:text-white transition-colors"},fe={class:"px-8 py-6 font-black text-[10px] uppercase tracking-widest text-gray-400 group-hover:text-black transition-colors"},he={class:"px-8 py-6 font-black text-[10px] uppercase tracking-widest text-gray-400 group-hover:text-black transition-colors"},me={class:"px-8 py-6 text-right"},ke={class:"flex items-center justify-end gap-3"},we=["onClick"],Ae=["onClick"],_e={class:"space-y-12 py-4"},Ee={class:"space-y-6"},Te={class:"space-y-6"},Ce={class:"grid grid-cols-3 gap-6"},Ue=["value"],Me={class:"space-y-6"},Re={class:"space-y-6 pb-8"},Se={class:"grid md:grid-cols-2 gap-10"},De=["disabled"],$e=K({__name:"archives",setup(a){const{fetchArchives:l,archives:u,loading:i}=se(),{createArchive:r}=ae(),{updateArchive:g}=re(),{deleteArchive:N}=oe(),v=n(!1),m=n(!1),k=n(null),T=n(!1),y=n(null),o=Q({title:"",description:"",type:"speech",date:"",year:new Date().getFullYear(),month:"",fileUrl:"",thumbnailUrl:""}),w=n(!1),M=["January","February","March","April","May","June","July","August","September","October","November","December"],V=c=>c?M[c-1]:"-",L=()=>{y.value=null,Object.assign(o,{title:"",description:"",type:"speech",date:"",year:new Date().getFullYear(),month:"",fileUrl:"",thumbnailUrl:""}),v.value=!0},O=c=>{y.value=c._id,Object.assign(o,{...c,date:c.date?new Date(c.date).toISOString().split("T")[0]:""}),v.value=!0},F=async()=>{w.value=!0;try{y.value?await g(y.value,o):await r(o),await l(),v.value=!1}finally{w.value=!1}},P=c=>{k.value=c,m.value=!0},H=async()=>{if(k.value){T.value=!0;try{await N(k.value),await l(),m.value=!1}finally{T.value=!1,k.value=null}}};return ee({title:"Archives Management | PANAFSTRAG"}),(c,t)=>{const $=J,j=z,B=X,Y=Z,G=W;return d(),p("div",le,[e("div",{class:"flex flex-col md:flex-row md:items-end justify-between gap-6"},[t[10]||(t[10]=e("div",null,[e("p",{class:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-400 mb-2"},"Intellectual Property"),e("h1",{class:"text-4xl lg:text-6xl font-black tracking-tighter uppercase italic leading-none text-black"},[te(" Archives "),e("span",{class:"not-italic text-gray-400 leading-none"},"Management")])],-1)),e("button",{onClick:L,class:"px-10 py-5 bg-black text-white font-black text-[10px] tracking-[0.3em] uppercase hover:bg-gray-800 active:scale-95 transition-all shadow-xl shadow-black/10"}," ADD RESOURCE ")]),C(i)?(d(),p("div",ne,[f($)])):C(u)?.length?(d(),p("div",ce,[e("div",ue,[e("table",de,[t[13]||(t[13]=e("thead",null,[e("tr",{class:"bg-gray-50 border-b border-gray-100"},[e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Resource Narrative"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Classification"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Month"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400"},"Year"),e("th",{class:"px-8 py-6 text-[10px] font-black uppercase tracking-widest text-gray-400 text-right"},"Actions")])],-1)),e("tbody",pe,[(d(!0),p(R,null,S(C(u),s=>(d(),p("tr",{key:s._id,class:"hover:bg-gray-50/50 transition-colors group"},[e("td",be,[e("div",null,[e("p",ge,b(s.title),1),e("p",ve,b(s.description),1)])]),e("td",xe,[e("span",ye,b(s.type),1)]),e("td",fe,b(V(s.month)),1),e("td",he,b(s.year),1),e("td",me,[e("div",ke,[e("button",{onClick:A=>O(s),class:"p-2 hover:bg-black hover:text-white border border-transparent hover:border-black transition-all"},[...t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,we),e("button",{onClick:A=>P(s._id),class:"p-2 text-gray-300 hover:text-black hover:bg-white transition-all"},[...t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ae)])])]))),128))])])])])):(d(),p("div",ie,[f(j,{title:"REPO EMPTY",message:"The library sector contains no indexed materials."})])),f(Y,{show:v.value,title:y.value?"EDIT RESOURCE LOG":"NEW RESIDENTIAL ENTRY",onClose:t[8]||(t[8]=s=>v.value=!1)},{actions:D(()=>[e("button",{onClick:t[7]||(t[7]=s=>v.value=!1),class:"px-10 py-5 text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-black transition-colors"},"ABORT"),e("button",{onClick:F,disabled:w.value,class:"px-12 py-5 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-gray-800 disabled:opacity-30 transition-all"},b(w.value?"INDEXING...":"AUTHORIZE ARCHIVE"),9,De)]),default:D(()=>[e("div",_e,[e("section",Ee,[t[20]||(t[20]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Resource Identity",-1)),e("div",Te,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Primary Title",-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.title=s),type:"text",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm uppercase tracking-widest"},null,512),[[_,o.title]])]),e("div",Ce,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Classification",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.type=s),class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none text-[10px] font-black tracking-widest uppercase"},[...t[15]||(t[15]=[e("option",{value:"speech"},"SPEECH",-1),e("option",{value:"report"},"ANNUAL REPORT",-1),e("option",{value:"publication"},"PUBLICATION",-1),e("option",{value:"media"},"MEDIA",-1),e("option",{value:"research"},"RESEARCH PAPER",-1)])],512),[[I,o.type]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Fiscal Year",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.year=s),type:"number",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none font-bold text-sm uppercase tracking-widest"},null,512),[[_,o.year,void 0,{number:!0}]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Month",-1)),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.month=s),class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none text-[10px] font-black tracking-widest uppercase"},[t[18]||(t[18]=e("option",{value:""},"SELECT MONTH",-1)),(d(),p(R,null,S(M,(s,A)=>e("option",{key:A,value:A+1},b(s),9,Ue)),64))],512),[[I,o.month,void 0,{number:!0}]])])])])]),e("section",Me,[t[22]||(t[22]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"Narrative Profile",-1)),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Executive Summary",-1)),x(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.description=s),rows:"3",class:"w-full p-4 bg-gray-50 border-none outline-none focus:ring-1 focus:ring-black transition-all font-medium text-sm leading-relaxed"},null,512),[[_,o.description]])])]),e("section",Re,[t[25]||(t[25]=e("h3",{class:"text-[10px] font-black uppercase tracking-[0.3em] text-gray-300 border-b border-gray-100 pb-2"},"File Repository",-1)),e("div",Se,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-2"},"Master Document URL",-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.fileUrl=s),type:"url",placeholder:"HTTPS://DOC-VAULT.NET/...",class:"w-full px-0 py-3 bg-transparent border-b border-gray-200 focus:border-black outline-none transition-all font-bold text-sm uppercase tracking-tighter"},null,512),[[_,o.fileUrl]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-[9px] font-black uppercase tracking-widest text-gray-400 mb-4"},"Identification Thumbnail",-1)),f(B,{modelValue:o.thumbnailUrl,"onUpdate:modelValue":t[6]||(t[6]=s=>o.thumbnailUrl=s),folder:"archives"},null,8,["modelValue"])])])])])]),_:1},8,["show","title"]),f(G,{show:m.value,title:"DELETE ARCHIVE ITEM",message:"Are you sure you want to remove this resource from the library? This operation is permanent.",loading:T.value,onClose:t[9]||(t[9]=s=>m.value=!1),onConfirm:H},null,8,["show","loading"])])}}});export{$e as default};
